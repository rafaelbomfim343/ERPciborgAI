"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@visactor+vgrammar-wordcloud@0.16.11";
exports.ids = ["vendor-chunks/@visactor+vgrammar-wordcloud@0.16.11"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/base.js":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/base.js ***!
  \**********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseLayout: () => (/* binding */ BaseLayout)\n/* harmony export */ });\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.19.7/node_modules/@visactor/vutils/es/common/merge.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.19.7/node_modules/@visactor/vutils/es/common/isFunction.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.19.7/node_modules/@visactor/vutils/es/common/isNil.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.19.7/node_modules/@visactor/vutils/es/angle.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.19.7/node_modules/@visactor/vutils/es/common/array.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.19.7/node_modules/@visactor/vutils/es/common/random.js\");\n/* harmony import */ var _visactor_vgrammar_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @visactor/vgrammar-util */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-util@0.16.11/node_modules/@visactor/vgrammar-util/es/shapes.js\");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./util */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/util.js\");\n\n\n\n\n\n\nclass BaseLayout {\n    constructor(options) {\n        var _a, _b;\n        switch (this.options = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({}, BaseLayout.defaultOptions, options), (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(this.options.shape) ? this.shape = this.options.shape : this.shape = (0,_visactor_vgrammar_util__WEBPACK_IMPORTED_MODULE_2__.getShapeFunction)(this.options.shape), \n        this.getText = null !== (_a = (0,_util__WEBPACK_IMPORTED_MODULE_3__.functor)(this.options.text)) && void 0 !== _a ? _a : d => d, \n        this.getTextFontWeight = (0,_util__WEBPACK_IMPORTED_MODULE_3__.functor)(this.options.fontWeight), this.getTextFontSize = (0,_util__WEBPACK_IMPORTED_MODULE_3__.functor)(this.options.fontSize), \n        this.getTextFontStyle = (0,_util__WEBPACK_IMPORTED_MODULE_3__.functor)(this.options.fontStyle), this.getTextFontFamily = (0,_util__WEBPACK_IMPORTED_MODULE_3__.functor)(this.options.fontFamily), \n        this.outputCallback = null !== (_b = this.options.outputCallback) && void 0 !== _b ? _b : res => res, \n        this.options.color) {\n          case \"random-dark\":\n            this.getTextColor = () => (0,_util__WEBPACK_IMPORTED_MODULE_3__.randomHslColor)(10, 50);\n            break;\n\n          case \"random-light\":\n            this.getTextColor = () => (0,_util__WEBPACK_IMPORTED_MODULE_3__.randomHslColor)(50, 90);\n            break;\n\n          default:\n            this.getTextColor = (0,_util__WEBPACK_IMPORTED_MODULE_3__.functor)(this.options.color);\n        }\n        if ((0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(this.options.rotate)) if (this.options.useRandomRotate) {\n            const rotationRange = Math.abs(this.options.maxRotation - this.options.minRotation), rotationSteps = Math.abs(Math.floor(this.options.rotationSteps)), minRotation = Math.min(this.options.maxRotation, this.options.minRotation);\n            this.getTextRotate = () => 0 === this.options.rotateRatio || Math.random() > this.options.rotateRatio ? 0 : 0 === rotationRange ? minRotation : rotationSteps > 0 ? minRotation + Math.floor(Math.random() * rotationSteps) * rotationRange / (rotationSteps - 1) : minRotation + Math.random() * rotationRange;\n        } else this.getTextRotate = () => 0; else this.getTextRotate = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(this.options.rotate) ? d => {\n            var _a;\n            return (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_5__.degreeToRadian)(null !== (_a = this.options.rotate(d)) && void 0 !== _a ? _a : 0);\n        } : (d, i) => {\n            const rotates = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_6__.array)(this.options.rotate), random = this.options.random ? Math.random() : (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_7__.seedRandom)(i);\n            return (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_5__.degreeToRadian)(rotates[Math.floor(random * rotates.length)]);\n        };\n    }\n    canRepeat() {\n        return !1;\n    }\n    exceedTime() {\n        var _a;\n        return this.options.progressiveStep > 0 ? this.progressiveIndex >= ((null !== (_a = this.currentStepIndex) && void 0 !== _a ? _a : -1) + 1) * this.options.progressiveStep : this.options.progressiveTime > 0 && (new Date).getTime() - this.escapeTime > this.options.progressiveTime;\n    }\n    progressiveRun() {\n        var _a;\n        if (this.options.progressiveStep > 0 ? this.currentStepIndex = (null !== (_a = this.currentStepIndex) && void 0 !== _a ? _a : -1) + 1 : this.options.progressiveTime > 0 && (this.escapeTime = Date.now()), \n        this.data && this.progressiveIndex < this.data.length) {\n            this.progressiveResult = [];\n            let i = this.progressiveIndex, curWordTryCount = 0;\n            const maxSingleWordTryCount = this.options.maxSingleWordTryCount, maxFailCount = Math.min(this.options.maxFailCount, this.originalData.length);\n            for (;i < this.data.length && this.failCount < maxFailCount; ) {\n                const drawn = this.layoutWord(i);\n                if (curWordTryCount++, (drawn || curWordTryCount > maxSingleWordTryCount) && (i++, \n                curWordTryCount = 0, this.failCount = drawn ? 0 : this.failCount + 1), this.progressiveIndex = i, \n                this.exceedTime()) break;\n                i === this.data.length && this.failCount < maxFailCount && this.options.repeatFill && this.canRepeat() && (this.data = [ ...this.data, ...this.originalData.map((entry => Object.assign(Object.assign({}, entry), {\n                    isFill: !0\n                }))) ], this.isTryRepeatFill = !0);\n            }\n            return this.progressiveResult;\n        }\n        return this.result;\n    }\n    initProgressive() {\n        this.failCount = 0, this.progressiveIndex = 0, this.options.progressiveStep > 0 ? this.currentStepIndex = -1 : this.options.progressiveTime > 0 && (this.escapeTime = Date.now()), \n        this.progressiveResult = [];\n    }\n    output() {\n        return this.result ? this.outputCallback(this.result) : null;\n    }\n    progressiveOutput() {\n        return this.progressiveResult ? this.outputCallback(this.progressiveResult) : null;\n    }\n    unfinished() {\n        return this.data && this.data.length && !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(this.progressiveIndex) && this.progressiveIndex < this.data.length;\n    }\n    release() {\n        this.data = null, this.result = null, this.progressiveIndex = null, this.progressiveResult = null;\n    }\n}\n\nBaseLayout.defaultOptions = {\n    fontFamily: '\"Trebuchet MS\", \"Heiti TC\", \"微軟正黑體\", \"Arial Unicode MS\", \"Droid Fallback Sans\", sans-serif',\n    fontWeight: \"normal\",\n    color: \"random-dark\",\n    fontStyle: \"normal\",\n    minFontSize: 12,\n    drawOutOfBound: !1,\n    shrink: !1,\n    minRotation: -Math.PI / 2,\n    maxRotation: Math.PI / 2,\n    rotationSteps: 0,\n    rotateRatio: .1,\n    random: !1,\n    shape: \"circle\",\n    progressiveTime: 0,\n    progressiveStep: 0,\n    repeatFill: !1,\n    fillTextFontSize: 12,\n    maxFailCount: 20\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXdvcmRjbG91ZEAwLjE2LjExL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItd29yZGNsb3VkL2VzL2Jhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQStGOztBQUVwQzs7QUFFVjs7QUFFMUM7QUFDUDtBQUNBO0FBQ0EsK0JBQStCLDREQUFLLEdBQUcsdUNBQXVDLDREQUFVLHNFQUFzRSx5RUFBZ0I7QUFDOUssc0NBQXNDLDhDQUFPO0FBQzdDLGlDQUFpQyw4Q0FBTyxrREFBa0QsOENBQU87QUFDakcsZ0NBQWdDLDhDQUFPLG1EQUFtRCw4Q0FBTztBQUNqRztBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MscURBQWM7QUFDcEQ7O0FBRUE7QUFDQSxzQ0FBc0MscURBQWM7QUFDcEQ7O0FBRUE7QUFDQSxnQ0FBZ0MsOENBQU87QUFDdkM7QUFDQSxZQUFZLDREQUFLO0FBQ2pCO0FBQ0E7QUFDQSxVQUFVLG1DQUFtQywwQkFBMEIsNERBQVU7QUFDakY7QUFDQSxtQkFBbUIsZ0VBQWM7QUFDakMsVUFBVTtBQUNWLDRCQUE0Qix1REFBSyxzRUFBc0UsNERBQVU7QUFDakgsbUJBQW1CLGdFQUFjO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHVEQUF1RDtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdOQUF3TjtBQUN4TjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCw0REFBSztBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXNhY3Rvci1uZXh0LXRlbXBsYXRlLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0B2aXNhY3Rvcit2Z3JhbW1hci13b3JkY2xvdWRAMC4xNi4xMS9ub2RlX21vZHVsZXMvQHZpc2FjdG9yL3ZncmFtbWFyLXdvcmRjbG91ZC9lcy9iYXNlLmpzP2FlN2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXJyYXksIGRlZ3JlZVRvUmFkaWFuLCBpc0Z1bmN0aW9uLCBpc05pbCwgbWVyZ2UsIHNlZWRSYW5kb20gfSBmcm9tIFwiQHZpc2FjdG9yL3Z1dGlsc1wiO1xuXG5pbXBvcnQgeyBnZXRTaGFwZUZ1bmN0aW9uIH0gZnJvbSBcIkB2aXNhY3Rvci92Z3JhbW1hci11dGlsXCI7XG5cbmltcG9ydCB7IGZ1bmN0b3IsIHJhbmRvbUhzbENvbG9yIH0gZnJvbSBcIi4vdXRpbFwiO1xuXG5leHBvcnQgY2xhc3MgQmFzZUxheW91dCB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBzd2l0Y2ggKHRoaXMub3B0aW9ucyA9IG1lcmdlKHt9LCBCYXNlTGF5b3V0LmRlZmF1bHRPcHRpb25zLCBvcHRpb25zKSwgaXNGdW5jdGlvbih0aGlzLm9wdGlvbnMuc2hhcGUpID8gdGhpcy5zaGFwZSA9IHRoaXMub3B0aW9ucy5zaGFwZSA6IHRoaXMuc2hhcGUgPSBnZXRTaGFwZUZ1bmN0aW9uKHRoaXMub3B0aW9ucy5zaGFwZSksIFxuICAgICAgICB0aGlzLmdldFRleHQgPSBudWxsICE9PSAoX2EgPSBmdW5jdG9yKHRoaXMub3B0aW9ucy50ZXh0KSkgJiYgdm9pZCAwICE9PSBfYSA/IF9hIDogZCA9PiBkLCBcbiAgICAgICAgdGhpcy5nZXRUZXh0Rm9udFdlaWdodCA9IGZ1bmN0b3IodGhpcy5vcHRpb25zLmZvbnRXZWlnaHQpLCB0aGlzLmdldFRleHRGb250U2l6ZSA9IGZ1bmN0b3IodGhpcy5vcHRpb25zLmZvbnRTaXplKSwgXG4gICAgICAgIHRoaXMuZ2V0VGV4dEZvbnRTdHlsZSA9IGZ1bmN0b3IodGhpcy5vcHRpb25zLmZvbnRTdHlsZSksIHRoaXMuZ2V0VGV4dEZvbnRGYW1pbHkgPSBmdW5jdG9yKHRoaXMub3B0aW9ucy5mb250RmFtaWx5KSwgXG4gICAgICAgIHRoaXMub3V0cHV0Q2FsbGJhY2sgPSBudWxsICE9PSAoX2IgPSB0aGlzLm9wdGlvbnMub3V0cHV0Q2FsbGJhY2spICYmIHZvaWQgMCAhPT0gX2IgPyBfYiA6IHJlcyA9PiByZXMsIFxuICAgICAgICB0aGlzLm9wdGlvbnMuY29sb3IpIHtcbiAgICAgICAgICBjYXNlIFwicmFuZG9tLWRhcmtcIjpcbiAgICAgICAgICAgIHRoaXMuZ2V0VGV4dENvbG9yID0gKCkgPT4gcmFuZG9tSHNsQ29sb3IoMTAsIDUwKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcInJhbmRvbS1saWdodFwiOlxuICAgICAgICAgICAgdGhpcy5nZXRUZXh0Q29sb3IgPSAoKSA9PiByYW5kb21Ic2xDb2xvcig1MCwgOTApO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhpcy5nZXRUZXh0Q29sb3IgPSBmdW5jdG9yKHRoaXMub3B0aW9ucy5jb2xvcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzTmlsKHRoaXMub3B0aW9ucy5yb3RhdGUpKSBpZiAodGhpcy5vcHRpb25zLnVzZVJhbmRvbVJvdGF0ZSkge1xuICAgICAgICAgICAgY29uc3Qgcm90YXRpb25SYW5nZSA9IE1hdGguYWJzKHRoaXMub3B0aW9ucy5tYXhSb3RhdGlvbiAtIHRoaXMub3B0aW9ucy5taW5Sb3RhdGlvbiksIHJvdGF0aW9uU3RlcHMgPSBNYXRoLmFicyhNYXRoLmZsb29yKHRoaXMub3B0aW9ucy5yb3RhdGlvblN0ZXBzKSksIG1pblJvdGF0aW9uID0gTWF0aC5taW4odGhpcy5vcHRpb25zLm1heFJvdGF0aW9uLCB0aGlzLm9wdGlvbnMubWluUm90YXRpb24pO1xuICAgICAgICAgICAgdGhpcy5nZXRUZXh0Um90YXRlID0gKCkgPT4gMCA9PT0gdGhpcy5vcHRpb25zLnJvdGF0ZVJhdGlvIHx8IE1hdGgucmFuZG9tKCkgPiB0aGlzLm9wdGlvbnMucm90YXRlUmF0aW8gPyAwIDogMCA9PT0gcm90YXRpb25SYW5nZSA/IG1pblJvdGF0aW9uIDogcm90YXRpb25TdGVwcyA+IDAgPyBtaW5Sb3RhdGlvbiArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHJvdGF0aW9uU3RlcHMpICogcm90YXRpb25SYW5nZSAvIChyb3RhdGlvblN0ZXBzIC0gMSkgOiBtaW5Sb3RhdGlvbiArIE1hdGgucmFuZG9tKCkgKiByb3RhdGlvblJhbmdlO1xuICAgICAgICB9IGVsc2UgdGhpcy5nZXRUZXh0Um90YXRlID0gKCkgPT4gMDsgZWxzZSB0aGlzLmdldFRleHRSb3RhdGUgPSBpc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy5yb3RhdGUpID8gZCA9PiB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICByZXR1cm4gZGVncmVlVG9SYWRpYW4obnVsbCAhPT0gKF9hID0gdGhpcy5vcHRpb25zLnJvdGF0ZShkKSkgJiYgdm9pZCAwICE9PSBfYSA/IF9hIDogMCk7XG4gICAgICAgIH0gOiAoZCwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgcm90YXRlcyA9IGFycmF5KHRoaXMub3B0aW9ucy5yb3RhdGUpLCByYW5kb20gPSB0aGlzLm9wdGlvbnMucmFuZG9tID8gTWF0aC5yYW5kb20oKSA6IHNlZWRSYW5kb20oaSk7XG4gICAgICAgICAgICByZXR1cm4gZGVncmVlVG9SYWRpYW4ocm90YXRlc1tNYXRoLmZsb29yKHJhbmRvbSAqIHJvdGF0ZXMubGVuZ3RoKV0pO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBjYW5SZXBlYXQoKSB7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgZXhjZWVkVGltZSgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnByb2dyZXNzaXZlU3RlcCA+IDAgPyB0aGlzLnByb2dyZXNzaXZlSW5kZXggPj0gKChudWxsICE9PSAoX2EgPSB0aGlzLmN1cnJlbnRTdGVwSW5kZXgpICYmIHZvaWQgMCAhPT0gX2EgPyBfYSA6IC0xKSArIDEpICogdGhpcy5vcHRpb25zLnByb2dyZXNzaXZlU3RlcCA6IHRoaXMub3B0aW9ucy5wcm9ncmVzc2l2ZVRpbWUgPiAwICYmIChuZXcgRGF0ZSkuZ2V0VGltZSgpIC0gdGhpcy5lc2NhcGVUaW1lID4gdGhpcy5vcHRpb25zLnByb2dyZXNzaXZlVGltZTtcbiAgICB9XG4gICAgcHJvZ3Jlc3NpdmVSdW4oKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5wcm9ncmVzc2l2ZVN0ZXAgPiAwID8gdGhpcy5jdXJyZW50U3RlcEluZGV4ID0gKG51bGwgIT09IChfYSA9IHRoaXMuY3VycmVudFN0ZXBJbmRleCkgJiYgdm9pZCAwICE9PSBfYSA/IF9hIDogLTEpICsgMSA6IHRoaXMub3B0aW9ucy5wcm9ncmVzc2l2ZVRpbWUgPiAwICYmICh0aGlzLmVzY2FwZVRpbWUgPSBEYXRlLm5vdygpKSwgXG4gICAgICAgIHRoaXMuZGF0YSAmJiB0aGlzLnByb2dyZXNzaXZlSW5kZXggPCB0aGlzLmRhdGEubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnByb2dyZXNzaXZlUmVzdWx0ID0gW107XG4gICAgICAgICAgICBsZXQgaSA9IHRoaXMucHJvZ3Jlc3NpdmVJbmRleCwgY3VyV29yZFRyeUNvdW50ID0gMDtcbiAgICAgICAgICAgIGNvbnN0IG1heFNpbmdsZVdvcmRUcnlDb3VudCA9IHRoaXMub3B0aW9ucy5tYXhTaW5nbGVXb3JkVHJ5Q291bnQsIG1heEZhaWxDb3VudCA9IE1hdGgubWluKHRoaXMub3B0aW9ucy5tYXhGYWlsQ291bnQsIHRoaXMub3JpZ2luYWxEYXRhLmxlbmd0aCk7XG4gICAgICAgICAgICBmb3IgKDtpIDwgdGhpcy5kYXRhLmxlbmd0aCAmJiB0aGlzLmZhaWxDb3VudCA8IG1heEZhaWxDb3VudDsgKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZHJhd24gPSB0aGlzLmxheW91dFdvcmQoaSk7XG4gICAgICAgICAgICAgICAgaWYgKGN1cldvcmRUcnlDb3VudCsrLCAoZHJhd24gfHwgY3VyV29yZFRyeUNvdW50ID4gbWF4U2luZ2xlV29yZFRyeUNvdW50KSAmJiAoaSsrLCBcbiAgICAgICAgICAgICAgICBjdXJXb3JkVHJ5Q291bnQgPSAwLCB0aGlzLmZhaWxDb3VudCA9IGRyYXduID8gMCA6IHRoaXMuZmFpbENvdW50ICsgMSksIHRoaXMucHJvZ3Jlc3NpdmVJbmRleCA9IGksIFxuICAgICAgICAgICAgICAgIHRoaXMuZXhjZWVkVGltZSgpKSBicmVhaztcbiAgICAgICAgICAgICAgICBpID09PSB0aGlzLmRhdGEubGVuZ3RoICYmIHRoaXMuZmFpbENvdW50IDwgbWF4RmFpbENvdW50ICYmIHRoaXMub3B0aW9ucy5yZXBlYXRGaWxsICYmIHRoaXMuY2FuUmVwZWF0KCkgJiYgKHRoaXMuZGF0YSA9IFsgLi4udGhpcy5kYXRhLCAuLi50aGlzLm9yaWdpbmFsRGF0YS5tYXAoKGVudHJ5ID0+IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgZW50cnkpLCB7XG4gICAgICAgICAgICAgICAgICAgIGlzRmlsbDogITBcbiAgICAgICAgICAgICAgICB9KSkpIF0sIHRoaXMuaXNUcnlSZXBlYXRGaWxsID0gITApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvZ3Jlc3NpdmVSZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0O1xuICAgIH1cbiAgICBpbml0UHJvZ3Jlc3NpdmUoKSB7XG4gICAgICAgIHRoaXMuZmFpbENvdW50ID0gMCwgdGhpcy5wcm9ncmVzc2l2ZUluZGV4ID0gMCwgdGhpcy5vcHRpb25zLnByb2dyZXNzaXZlU3RlcCA+IDAgPyB0aGlzLmN1cnJlbnRTdGVwSW5kZXggPSAtMSA6IHRoaXMub3B0aW9ucy5wcm9ncmVzc2l2ZVRpbWUgPiAwICYmICh0aGlzLmVzY2FwZVRpbWUgPSBEYXRlLm5vdygpKSwgXG4gICAgICAgIHRoaXMucHJvZ3Jlc3NpdmVSZXN1bHQgPSBbXTtcbiAgICB9XG4gICAgb3V0cHV0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHQgPyB0aGlzLm91dHB1dENhbGxiYWNrKHRoaXMucmVzdWx0KSA6IG51bGw7XG4gICAgfVxuICAgIHByb2dyZXNzaXZlT3V0cHV0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9ncmVzc2l2ZVJlc3VsdCA/IHRoaXMub3V0cHV0Q2FsbGJhY2sodGhpcy5wcm9ncmVzc2l2ZVJlc3VsdCkgOiBudWxsO1xuICAgIH1cbiAgICB1bmZpbmlzaGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhICYmIHRoaXMuZGF0YS5sZW5ndGggJiYgIWlzTmlsKHRoaXMucHJvZ3Jlc3NpdmVJbmRleCkgJiYgdGhpcy5wcm9ncmVzc2l2ZUluZGV4IDwgdGhpcy5kYXRhLmxlbmd0aDtcbiAgICB9XG4gICAgcmVsZWFzZSgpIHtcbiAgICAgICAgdGhpcy5kYXRhID0gbnVsbCwgdGhpcy5yZXN1bHQgPSBudWxsLCB0aGlzLnByb2dyZXNzaXZlSW5kZXggPSBudWxsLCB0aGlzLnByb2dyZXNzaXZlUmVzdWx0ID0gbnVsbDtcbiAgICB9XG59XG5cbkJhc2VMYXlvdXQuZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgZm9udEZhbWlseTogJ1wiVHJlYnVjaGV0IE1TXCIsIFwiSGVpdGkgVENcIiwgXCLlvq7ou5/mraPpu5Hpq5RcIiwgXCJBcmlhbCBVbmljb2RlIE1TXCIsIFwiRHJvaWQgRmFsbGJhY2sgU2Fuc1wiLCBzYW5zLXNlcmlmJyxcbiAgICBmb250V2VpZ2h0OiBcIm5vcm1hbFwiLFxuICAgIGNvbG9yOiBcInJhbmRvbS1kYXJrXCIsXG4gICAgZm9udFN0eWxlOiBcIm5vcm1hbFwiLFxuICAgIG1pbkZvbnRTaXplOiAxMixcbiAgICBkcmF3T3V0T2ZCb3VuZDogITEsXG4gICAgc2hyaW5rOiAhMSxcbiAgICBtaW5Sb3RhdGlvbjogLU1hdGguUEkgLyAyLFxuICAgIG1heFJvdGF0aW9uOiBNYXRoLlBJIC8gMixcbiAgICByb3RhdGlvblN0ZXBzOiAwLFxuICAgIHJvdGF0ZVJhdGlvOiAuMSxcbiAgICByYW5kb206ICExLFxuICAgIHNoYXBlOiBcImNpcmNsZVwiLFxuICAgIHByb2dyZXNzaXZlVGltZTogMCxcbiAgICBwcm9ncmVzc2l2ZVN0ZXA6IDAsXG4gICAgcmVwZWF0RmlsbDogITEsXG4gICAgZmlsbFRleHRGb250U2l6ZTogMTIsXG4gICAgbWF4RmFpbENvdW50OiAyMFxufTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/base.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/cloud-layout.js":
/*!******************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/cloud-layout.js ***!
  \******************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CloudLayout: () => (/* binding */ CloudLayout)\n/* harmony export */ });\n/* harmony import */ var _visactor_vrender_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @visactor/vrender-core */ \"(ssr)/./node_modules/.pnpm/@visactor+vrender-core@0.22.16/node_modules/@visactor/vrender-core/es/modules.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.19.7/node_modules/@visactor/vutils/es/common/merge.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.19.7/node_modules/@visactor/vutils/es/common/isString.js\");\n/* harmony import */ var _visactor_vgrammar_util__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @visactor/vgrammar-util */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-util@0.16.11/node_modules/@visactor/vgrammar-util/es/shapes.js\");\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/base.js\");\n/* harmony import */ var _spirals__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./spirals */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/spirals.js\");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./util */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/util.js\");\n\n\n\n\n\n\n\n\n\n\n\n\nconst MAX_ARGUMENTS_LENGTH = 6e4;\n\nclass CloudLayout extends _base__WEBPACK_IMPORTED_MODULE_0__.BaseLayout {\n    constructor(options) {\n        var _a;\n        super((0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({}, CloudLayout.defaultOptions, options)), this.cw = 64, this.ch = 2048, \n        this._size = [ 256, 256 ], this._isBoardExpandCompleted = !1, this._placeStatus = 0, \n        this._tTemp = null, this._dtTemp = null, this._dy = 0, this.cacheMap = new Map, \n        this.options.minFontSize <= CloudLayout.defaultOptions.minFontSize && (this.options.minFontSize = CloudLayout.defaultOptions.minFontSize), \n        this.spiral = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(this.options.spiral) ? null !== (_a = _spirals__WEBPACK_IMPORTED_MODULE_3__.spirals[this.options.spiral]) && void 0 !== _a ? _a : _spirals__WEBPACK_IMPORTED_MODULE_3__.spirals.archimedean : this.options.spiral, \n        this.random = this.options.random ? Math.random : () => 1, this.getTextPadding = (0,_util__WEBPACK_IMPORTED_MODULE_4__.functor)(this.options.padding);\n    }\n    zoomRatio() {\n        return this._originSize[0] / this._size[0];\n    }\n    dy() {\n        return this._dy;\n    }\n    layoutWord(index) {\n        const d = this.data[index];\n        if (\"\" === (\"\" + d.text).trim()) return !0;\n        const {maxRadius: maxRadius, center: center} = (0,_visactor_vgrammar_util__WEBPACK_IMPORTED_MODULE_5__.getMaxRadiusAndCenter)(this.options.shape, this._size);\n        if (d.x = center[0], d.y = center[1], cloudSprite(this.contextAndRatio, d, this.data, index, this.cw, this.ch), \n        this._placeStatus = 0, d.hasText && this.place(this._board, d, this._bounds, maxRadius)) return this.result.push(d), \n        this._bounds ? cloudBounds(this._bounds, d) : this._bounds = [ {\n            x: d.x + d.x0,\n            y: d.y + d.y0\n        }, {\n            x: d.x + d.x1,\n            y: d.y + d.y1\n        } ], d.x -= this._size[0] >> 1, d.y -= this._size[1] >> 1, this._tTemp = null, this._dtTemp = null, \n        !0;\n        if (this.updateBoardExpandStatus(d.fontSize), d.hasText && this.shouldShrinkContinue()) {\n            if (1 === this._placeStatus) {\n                const maxSize0 = d.fontSize * this._originSize[0] / this.options.minFontSize, distSize0 = Math.max(d.width, d.height);\n                if (distSize0 <= maxSize0) this.expandBoard(this._board, this._bounds, distSize0 / this._size[0]); else {\n                    if (!this.options.clip) return !0;\n                    this.expandBoard(this._board, this._bounds, maxSize0 / this._size[0]);\n                }\n            } else this._placeStatus, this.expandBoard(this._board, this._bounds);\n            return this.updateBoardExpandStatus(d.fontSize), !1;\n        }\n        return this._tTemp = null, this._dtTemp = null, !0;\n    }\n    layout(words, config) {\n        this.initProgressive(), this.result = [], this._size = [ config.width, config.height ], \n        this.clearCache(), this._originSize = [ ...this._size ];\n        const contextAndRatio = this.getContext(_visactor_vrender_core__WEBPACK_IMPORTED_MODULE_6__.vglobal.createCanvas({\n            width: 1,\n            height: 1\n        }));\n        this.contextAndRatio = contextAndRatio, this._board = new Array((this._size[0] >> 5) * this._size[1]).fill(0), \n        this._bounds = null;\n        words.length;\n        this.result = [];\n        const data = words.map(((d, i) => ({\n            text: this.getText(d),\n            fontFamily: this.getTextFontFamily(d),\n            fontStyle: this.getTextFontStyle(d),\n            fontWeight: this.getTextFontWeight(d),\n            angle: this.getTextRotate(d, i),\n            fontSize: ~~this.getTextFontSize(d),\n            padding: this.getTextPadding(d),\n            xoff: 0,\n            yoff: 0,\n            x1: 0,\n            y1: 0,\n            x0: 0,\n            y0: 0,\n            hasText: !1,\n            sprite: null,\n            datum: d,\n            x: 0,\n            y: 0,\n            width: 0,\n            height: 0\n        }))).sort((function(a, b) {\n            return b.fontSize - a.fontSize;\n        }));\n        if (this.originalData = data, this.data = data, this.progressiveRun(), !this.options.clip && this.options.enlarge && this._bounds && this.shrinkBoard(this._bounds), \n        this._bounds && [ \"cardioid\", \"triangle\", \"triangle-upright\" ].includes(this.options.shape)) {\n            const currentCenterY = (this._bounds[0].y + this._bounds[1].y) / 2;\n            this._dy = -(currentCenterY - this._originSize[1] / 2);\n        }\n        return this.result;\n    }\n    formatTagItem(words) {\n        const size = this._size, zoomRatio = this.zoomRatio(), globalDy = this.dy(), dx = size[0] >> 1, dy = size[1] >> 1, n = words.length, result = [];\n        let w, t;\n        for (let i = 0; i < n; ++i) w = words[i], t = {}, t.datum = w.datum, t.x = (w.x + dx) * zoomRatio, \n        t.y = (w.y + dy + globalDy) * zoomRatio, t.fontFamily = w.fontFamily, t.fontSize = w.fontSize * zoomRatio, \n        t.fontStyle = w.fontStyle, t.fontWeight = w.fontWeight, t.angle = w.angle, result.push(t);\n        return result;\n    }\n    output() {\n        return this.outputCallback ? this.outputCallback(this.formatTagItem(this.result)) : this.formatTagItem(this.result);\n    }\n    progressiveOutput() {\n        return this.outputCallback ? this.outputCallback(this.formatTagItem(this.progressiveResult)) : this.formatTagItem(this.progressiveResult);\n    }\n    updateBoardExpandStatus(fontSize) {\n        this._isBoardExpandCompleted = fontSize * (this._originSize[0] / this._size[0]) < this.options.minFontSize;\n    }\n    shouldShrinkContinue() {\n        return !this.options.clip && this.options.shrink && !this._isBoardExpandCompleted;\n    }\n    shrinkBoard(bounds) {\n        const leftTopPoint = bounds[0], rightBottomPoint = bounds[1];\n        if (rightBottomPoint.x >= this._size[0] || rightBottomPoint.y >= this._size[1]) return;\n        const minXValue = Math.min(leftTopPoint.x, this._size[0] - rightBottomPoint.x), minYValue = Math.min(leftTopPoint.y, this._size[1] - rightBottomPoint.y), minRatio = 2 * Math.min(minXValue / this._size[0], minYValue / this._size[1]);\n        this._size = this._size.map((v => v * (1 - minRatio)));\n    }\n    expandBoard(board, bounds, factor) {\n        const expandedLeftWidth = this._size[0] * (factor || 1.1) - this._size[0] >> 5;\n        let diffWidth = 2 * expandedLeftWidth > 2 ? expandedLeftWidth : 2;\n        diffWidth % 2 != 0 && diffWidth++;\n        let diffHeight = Math.ceil(this._size[1] * (diffWidth << 5) / this._size[0]);\n        diffHeight % 2 != 0 && diffHeight++;\n        const w = this._size[0], h = this._size[1], widthArr = new Array(diffWidth).fill(0), heightArr = new Array(diffHeight / 2 * (diffWidth + (w >> 5))).fill(0);\n        this.insertZerosToArray(board, h * (w >> 5), heightArr.length + diffWidth / 2);\n        for (let i = h - 1; i > 0; i--) this.insertZerosToArray(board, i * (w >> 5), widthArr.length);\n        this.insertZerosToArray(board, 0, heightArr.length + diffWidth / 2), this._size = [ w + (diffWidth << 5), h + diffHeight ], \n        bounds && (bounds[0].x += (diffWidth << 5) / 2, bounds[0].y += diffHeight / 2, bounds[1].x += (diffWidth << 5) / 2, \n        bounds[1].y += diffHeight / 2);\n    }\n    insertZerosToArray(array, index, length) {\n        if (this.options.customInsertZerosToArray) return this.options.customInsertZerosToArray(array, index, length);\n        const len = Math.floor(length / 6e4), restLen = length % 6e4;\n        for (let i = 0; i < len; i++) array.splice(index + 6e4 * i, 0, ...new Array(6e4).fill(0));\n        array.splice(index + 6e4 * len, 0, ...new Array(restLen).fill(0));\n    }\n    getContext(canvas) {\n        canvas.width = 1, canvas.height = 1;\n        const imageData = canvas.getContext(\"2d\", {\n            willReadFrequently: !0\n        }).getImageData(0, 0, 1, 1), ratio = Math.sqrt(imageData.data.length >> 2);\n        canvas.width = (this.cw << 5) / ratio, canvas.height = this.ch / ratio;\n        const context = canvas.getContext(\"2d\", {\n            willReadFrequently: !0\n        });\n        return context.fillStyle = context.strokeStyle = \"red\", context.textAlign = \"center\", \n        {\n            context: context,\n            ratio: ratio,\n            canvas: canvas\n        };\n    }\n    place(board, tag, bounds, maxRadius) {\n        let isCollide = !1;\n        if (this.shouldShrinkContinue() && (tag.width > this._size[0] || tag.height > this._size[1])) return this._placeStatus = 1, \n        !1;\n        const dt = this.random() < .5 ? 1 : -1;\n        if (!this.shouldShrinkContinue() && this.isSizeLargerThanMax(tag, dt)) return null;\n        const startX = tag.x, startY = tag.y, maxDelta = Math.sqrt(this._size[0] * this._size[0] + this._size[1] * this._size[1]), s = this.spiral(this._size);\n        let dxdy, dx, dy, _tag, t = -dt;\n        for (this._tTemp = null, this._dtTemp = null; dxdy = s(t += dt); ) {\n            dx = dxdy[0], dy = dxdy[1];\n            const radius = Math.sqrt(dx ** 2 + dy ** 2);\n            let rad = Math.atan(dy / dx);\n            dx < 0 ? rad += Math.PI : dy < 0 && (rad = 2 * Math.PI + rad);\n            const rx = this.shape(rad);\n            if (Math.min(Math.abs(dx), Math.abs(dy)) >= maxDelta) break;\n            if (radius >= maxRadius) isCollide && null === this._tTemp && (this._tTemp = t, \n            this._dtTemp = dt); else {\n                if (tag.x = startX + ~~(radius * rx * Math.cos(-rad)), tag.y = startY + ~~(radius * rx * Math.sin(-rad)), \n                _tag = tag, this.options.clip) if (this.shouldShrinkContinue()) {\n                    if (isPartOutside(_tag, this._size)) {\n                        isCollide && null === this._tTemp && (this._tTemp = t, this._dtTemp = dt);\n                        continue;\n                    }\n                } else {\n                    if (isFullOutside(_tag, this._size)) {\n                        isCollide && null === this._tTemp && (this._tTemp = t, this._dtTemp = dt);\n                        continue;\n                    }\n                    isPartOutside(_tag, this._size) && (_tag = clipInnerTag(_tag, this._size));\n                } else if (isPartOutside(_tag, this._size)) {\n                    isCollide && null === this._tTemp && (this._tTemp = t, this._dtTemp = dt);\n                    continue;\n                }\n                if (isCollide = !0, (!bounds || collideRects(_tag, bounds)) && (!bounds || !cloudCollide(_tag, board, this._size))) {\n                    const sprite = _tag.sprite, w = _tag.width >> 5, sw = this._size[0] >> 5, lx = _tag.x - (w << 4), sx = 127 & lx, msx = 32 - sx, h = _tag.y1 - _tag.y0;\n                    let last, x = (_tag.y + _tag.y0) * sw + (lx >> 5);\n                    for (let j = 0; j < h; j++) {\n                        last = 0;\n                        for (let i = 0; i <= w; i++) board[x + i] |= last << msx | (i < w ? (last = sprite[j * w + i]) >>> sx : 0);\n                        x += sw;\n                    }\n                    return tag.sprite = null, _tag.sprite = null, !0;\n                }\n            }\n        }\n        return null !== this._tTemp && (this._placeStatus = 3), !this.shouldShrinkContinue() && this.setCache(_tag, dt), \n        !1;\n    }\n    clearCache() {\n        this.cacheMap.clear();\n    }\n    setCache(tag, dt) {\n        const cacheKey = `${tag.angle}-${dt}`, w = tag.x1 - tag.x0, h = tag.y1 - tag.y0;\n        if (!this.cacheMap.has(cacheKey)) return void this.cacheMap.set(cacheKey, {\n            width: w,\n            height: h\n        });\n        const {width: width, height: height} = this.cacheMap.get(cacheKey);\n        (w < width && h < height || w <= width && h < height) && this.cacheMap.set(cacheKey, {\n            width: w,\n            height: h\n        });\n    }\n    isSizeLargerThanMax(tag, dt) {\n        const cacheKey = `${tag.angle}-${dt}`;\n        if (!this.cacheMap.has(cacheKey)) return !1;\n        const {width: width, height: height} = this.cacheMap.get(cacheKey), w = tag.x1 - tag.x0, h = tag.y1 - tag.y0;\n        return w >= width && h >= height;\n    }\n}\n\nfunction cloudSprite(contextAndRatio, d, data, di, cw, ch) {\n    if (d.sprite) return;\n    const c = contextAndRatio.context, ratio = contextAndRatio.ratio;\n    c.setTransform(ratio, 0, 0, ratio, 0, 0), c.clearRect(0, 0, (cw << 5) / ratio, ch / ratio);\n    let x = 0, y = 0, maxh = 0;\n    const n = data.length;\n    let w, w32, h, i, j;\n    for (--di; ++di < n; ) {\n        if (d = data[di], c.save(), c.font = d.fontStyle + \" \" + d.fontWeight + \" \" + ~~((d.fontSize + 1) / ratio) + \"px \" + d.fontFamily, \n        w = c.measureText(d.text + \"m\").width * ratio, h = d.fontSize << 1, d.angle) {\n            const sr = Math.sin(d.angle), cr = Math.cos(d.angle), wcr = w * cr, wsr = w * sr, hcr = h * cr, hsr = h * sr;\n            w = Math.max(Math.abs(wcr + hsr), Math.abs(wcr - hsr)) + 31 >> 5 << 5, h = ~~Math.max(Math.abs(wsr + hcr), Math.abs(wsr - hcr));\n        } else w = w + 31 >> 5 << 5;\n        if (h > maxh && (maxh = h), x + w >= cw << 5 && (x = 0, y += maxh, maxh = 0), y + h >= ch) break;\n        c.translate((x + (w >> 1)) / ratio, (y + (h >> 1)) / ratio), d.angle && c.rotate(d.angle), \n        c.fillText(d.text, 0, 0), d.padding && (c.lineWidth = 2 * d.padding, c.strokeText(d.text, 0, 0)), \n        c.restore(), d.width = w, d.height = h, d.xoff = x, d.yoff = y, d.x1 = w >> 1, d.y1 = h >> 1, \n        d.x0 = -d.x1, d.y0 = -d.y1, d.hasText = !0, x += w;\n    }\n    const pixels = c.getImageData(0, 0, (cw << 5) / ratio, ch / ratio).data, sprite = [];\n    for (;--di >= 0; ) {\n        if (!(d = data[di]).hasText) continue;\n        for (w = d.width, w32 = w >> 5, h = d.y1 - d.y0, i = 0; i < h * w32; i++) sprite[i] = 0;\n        if (x = d.xoff, null == x) return;\n        y = d.yoff;\n        let seen = 0, seenRow = -1;\n        for (j = 0; j < h; j++) {\n            for (i = 0; i < w; i++) {\n                const k = w32 * j + (i >> 5), m = pixels[(y + j) * (cw << 5) + (x + i) << 2] ? 1 << 31 - i % 32 : 0;\n                sprite[k] |= m, seen |= m;\n            }\n            seen ? seenRow = j : (d.y0++, h--, j--, y++);\n        }\n        d.y1 = d.y0 + seenRow, d.sprite = sprite.slice(0, (d.y1 - d.y0) * w32);\n    }\n}\n\nfunction cloudCollide(tag, board, size) {\n    const sw = size[0] >> 5, sprite = tag.sprite, w = tag.width >> 5, lx = tag.x - (w << 4), sx = 127 & lx, msx = 32 - sx, h = tag.y1 - tag.y0;\n    let last, x = (tag.y + tag.y0) * sw + (lx >> 5);\n    for (let j = 0; j < h; j++) {\n        last = 0;\n        for (let i = 0; i <= w; i++) if ((last << msx | (i < w ? (last = sprite[j * w + i]) >>> sx : 0)) & board[x + i]) return !0;\n        x += sw;\n    }\n    return !1;\n}\n\nfunction cloudBounds(bounds, d) {\n    const b0 = bounds[0], b1 = bounds[1];\n    d.x + d.x0 < b0.x && (b0.x = d.x + d.x0), d.y + d.y0 < b0.y && (b0.y = d.y + d.y0), \n    d.x + d.x1 > b1.x && (b1.x = d.x + d.x1), d.y + d.y1 > b1.y && (b1.y = d.y + d.y1);\n}\n\nfunction collideRects(a, b) {\n    return a.x + a.x1 > b[0].x && a.x + a.x0 < b[1].x && a.y + a.y1 > b[0].y && a.y + a.y0 < b[1].y;\n}\n\nCloudLayout.defaultOptions = {\n    enlarge: !1,\n    minFontSize: 2,\n    maxSingleWordTryCount: 2\n};\n\nconst isFullOutside = (tag, size) => tag.x + tag.x0 > size[0] || tag.y + tag.y0 > size[0] || tag.x + tag.x1 < 0 || tag.y + tag.y1 < 0, isPartOutside = (tag, size) => tag.x + tag.x0 < 0 || tag.y + tag.y0 < 0 || tag.x + tag.x1 > size[0] || tag.y + tag.y1 > size[1];\n\nfunction clipInnerTag(tag, size) {\n    const sprite = tag.sprite, h = tag.y1 - tag.y0, w = tag.width >> 5;\n    let x = 0;\n    const _sprite = [], js = Math.max(-(tag.y0 + tag.y), 0), je = Math.min(h + (size[1] - (tag.y1 + tag.y)), h), is = Math.max(-(tag.x0 + tag.x), 0) >> 5, ie = Math.min(w + (size[0] - (tag.x1 + tag.x) >> 5) + 1, w);\n    for (let j = 0; j < h; j++) {\n        for (let i = 0; i < w; i++) j < js || je <= j || i < is || ie <= i || _sprite.push(sprite[x + i]);\n        x += w;\n    }\n    const xl = is << 5, xr = w - ie << 5, yb = js, yt = h - je;\n    return Object.assign(Object.assign({}, tag), {\n        width: tag.width - xl - xr,\n        height: tag.height - yb - yt,\n        x0: tag.x0 + xl,\n        x1: tag.x1 - xr,\n        y0: tag.y0 + yb,\n        y1: tag.y1 - yt,\n        x: tag.x + xl / 2 - xr / 2,\n        sprite: _sprite\n    });\n}\n//# sourceMappingURL=cloud-layout.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXdvcmRjbG91ZEAwLjE2LjExL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItd29yZGNsb3VkL2VzL2Nsb3VkLWxheW91dC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFpRDs7QUFFRTs7QUFFYTs7QUFFNUI7O0FBRUE7O0FBRUg7O0FBRWpDOztBQUVPLDBCQUEwQiw2Q0FBVTtBQUMzQztBQUNBO0FBQ0EsY0FBYyw0REFBSyxHQUFHO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw0REFBUSx1Q0FBdUMsNkNBQU8sK0NBQStDLDZDQUFPO0FBQ2xJLHlGQUF5Riw4Q0FBTztBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0NBQXNDLEVBQUUsOEVBQXFCO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1IQUFtSDtBQUNuSDtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsMkRBQU87QUFDdkQ7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixPQUFPLHlCQUF5QjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsT0FBTztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixTQUFTO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELG1CQUFtQjtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsT0FBTztBQUMzQztBQUNBLHdDQUF3QyxRQUFRO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLFVBQVUsR0FBRyxHQUFHO0FBQzVDO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxlQUFlLDhCQUE4QjtBQUM3QztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLDRCQUE0QixVQUFVLEdBQUcsR0FBRztBQUM1QztBQUNBLGVBQWUsOEJBQThCO0FBQzdDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsVUFBVTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsV0FBVztBQUNyQjtBQUNBLGdFQUFnRSxhQUFhO0FBQzdFO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixPQUFPO0FBQzNCLHdCQUF3QixPQUFPO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLE9BQU87QUFDM0I7QUFDQSx3QkFBd0IsUUFBUTtBQUNoQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLE9BQU87QUFDM0Isd0JBQXdCLE9BQU87QUFDL0I7QUFDQTtBQUNBO0FBQ0EseUNBQXlDO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Zpc2FjdG9yLW5leHQtdGVtcGxhdGUvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXdvcmRjbG91ZEAwLjE2LjExL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItd29yZGNsb3VkL2VzL2Nsb3VkLWxheW91dC5qcz9lNzJiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHZnbG9iYWwgfSBmcm9tIFwiQHZpc2FjdG9yL3ZyZW5kZXItY29yZVwiO1xuXG5pbXBvcnQgeyBpc1N0cmluZywgbWVyZ2UgfSBmcm9tIFwiQHZpc2FjdG9yL3Z1dGlsc1wiO1xuXG5pbXBvcnQgeyBnZXRNYXhSYWRpdXNBbmRDZW50ZXIgfSBmcm9tIFwiQHZpc2FjdG9yL3ZncmFtbWFyLXV0aWxcIjtcblxuaW1wb3J0IHsgQmFzZUxheW91dCB9IGZyb20gXCIuL2Jhc2VcIjtcblxuaW1wb3J0IHsgc3BpcmFscyB9IGZyb20gXCIuL3NwaXJhbHNcIjtcblxuaW1wb3J0IHsgZnVuY3RvciB9IGZyb20gXCIuL3V0aWxcIjtcblxuY29uc3QgTUFYX0FSR1VNRU5UU19MRU5HVEggPSA2ZTQ7XG5cbmV4cG9ydCBjbGFzcyBDbG91ZExheW91dCBleHRlbmRzIEJhc2VMYXlvdXQge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBzdXBlcihtZXJnZSh7fSwgQ2xvdWRMYXlvdXQuZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpKSwgdGhpcy5jdyA9IDY0LCB0aGlzLmNoID0gMjA0OCwgXG4gICAgICAgIHRoaXMuX3NpemUgPSBbIDI1NiwgMjU2IF0sIHRoaXMuX2lzQm9hcmRFeHBhbmRDb21wbGV0ZWQgPSAhMSwgdGhpcy5fcGxhY2VTdGF0dXMgPSAwLCBcbiAgICAgICAgdGhpcy5fdFRlbXAgPSBudWxsLCB0aGlzLl9kdFRlbXAgPSBudWxsLCB0aGlzLl9keSA9IDAsIHRoaXMuY2FjaGVNYXAgPSBuZXcgTWFwLCBcbiAgICAgICAgdGhpcy5vcHRpb25zLm1pbkZvbnRTaXplIDw9IENsb3VkTGF5b3V0LmRlZmF1bHRPcHRpb25zLm1pbkZvbnRTaXplICYmICh0aGlzLm9wdGlvbnMubWluRm9udFNpemUgPSBDbG91ZExheW91dC5kZWZhdWx0T3B0aW9ucy5taW5Gb250U2l6ZSksIFxuICAgICAgICB0aGlzLnNwaXJhbCA9IGlzU3RyaW5nKHRoaXMub3B0aW9ucy5zcGlyYWwpID8gbnVsbCAhPT0gKF9hID0gc3BpcmFsc1t0aGlzLm9wdGlvbnMuc3BpcmFsXSkgJiYgdm9pZCAwICE9PSBfYSA/IF9hIDogc3BpcmFscy5hcmNoaW1lZGVhbiA6IHRoaXMub3B0aW9ucy5zcGlyYWwsIFxuICAgICAgICB0aGlzLnJhbmRvbSA9IHRoaXMub3B0aW9ucy5yYW5kb20gPyBNYXRoLnJhbmRvbSA6ICgpID0+IDEsIHRoaXMuZ2V0VGV4dFBhZGRpbmcgPSBmdW5jdG9yKHRoaXMub3B0aW9ucy5wYWRkaW5nKTtcbiAgICB9XG4gICAgem9vbVJhdGlvKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fb3JpZ2luU2l6ZVswXSAvIHRoaXMuX3NpemVbMF07XG4gICAgfVxuICAgIGR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZHk7XG4gICAgfVxuICAgIGxheW91dFdvcmQoaW5kZXgpIHtcbiAgICAgICAgY29uc3QgZCA9IHRoaXMuZGF0YVtpbmRleF07XG4gICAgICAgIGlmIChcIlwiID09PSAoXCJcIiArIGQudGV4dCkudHJpbSgpKSByZXR1cm4gITA7XG4gICAgICAgIGNvbnN0IHttYXhSYWRpdXM6IG1heFJhZGl1cywgY2VudGVyOiBjZW50ZXJ9ID0gZ2V0TWF4UmFkaXVzQW5kQ2VudGVyKHRoaXMub3B0aW9ucy5zaGFwZSwgdGhpcy5fc2l6ZSk7XG4gICAgICAgIGlmIChkLnggPSBjZW50ZXJbMF0sIGQueSA9IGNlbnRlclsxXSwgY2xvdWRTcHJpdGUodGhpcy5jb250ZXh0QW5kUmF0aW8sIGQsIHRoaXMuZGF0YSwgaW5kZXgsIHRoaXMuY3csIHRoaXMuY2gpLCBcbiAgICAgICAgdGhpcy5fcGxhY2VTdGF0dXMgPSAwLCBkLmhhc1RleHQgJiYgdGhpcy5wbGFjZSh0aGlzLl9ib2FyZCwgZCwgdGhpcy5fYm91bmRzLCBtYXhSYWRpdXMpKSByZXR1cm4gdGhpcy5yZXN1bHQucHVzaChkKSwgXG4gICAgICAgIHRoaXMuX2JvdW5kcyA/IGNsb3VkQm91bmRzKHRoaXMuX2JvdW5kcywgZCkgOiB0aGlzLl9ib3VuZHMgPSBbIHtcbiAgICAgICAgICAgIHg6IGQueCArIGQueDAsXG4gICAgICAgICAgICB5OiBkLnkgKyBkLnkwXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHg6IGQueCArIGQueDEsXG4gICAgICAgICAgICB5OiBkLnkgKyBkLnkxXG4gICAgICAgIH0gXSwgZC54IC09IHRoaXMuX3NpemVbMF0gPj4gMSwgZC55IC09IHRoaXMuX3NpemVbMV0gPj4gMSwgdGhpcy5fdFRlbXAgPSBudWxsLCB0aGlzLl9kdFRlbXAgPSBudWxsLCBcbiAgICAgICAgITA7XG4gICAgICAgIGlmICh0aGlzLnVwZGF0ZUJvYXJkRXhwYW5kU3RhdHVzKGQuZm9udFNpemUpLCBkLmhhc1RleHQgJiYgdGhpcy5zaG91bGRTaHJpbmtDb250aW51ZSgpKSB7XG4gICAgICAgICAgICBpZiAoMSA9PT0gdGhpcy5fcGxhY2VTdGF0dXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXhTaXplMCA9IGQuZm9udFNpemUgKiB0aGlzLl9vcmlnaW5TaXplWzBdIC8gdGhpcy5vcHRpb25zLm1pbkZvbnRTaXplLCBkaXN0U2l6ZTAgPSBNYXRoLm1heChkLndpZHRoLCBkLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgaWYgKGRpc3RTaXplMCA8PSBtYXhTaXplMCkgdGhpcy5leHBhbmRCb2FyZCh0aGlzLl9ib2FyZCwgdGhpcy5fYm91bmRzLCBkaXN0U2l6ZTAgLyB0aGlzLl9zaXplWzBdKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5vcHRpb25zLmNsaXApIHJldHVybiAhMDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBhbmRCb2FyZCh0aGlzLl9ib2FyZCwgdGhpcy5fYm91bmRzLCBtYXhTaXplMCAvIHRoaXMuX3NpemVbMF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB0aGlzLl9wbGFjZVN0YXR1cywgdGhpcy5leHBhbmRCb2FyZCh0aGlzLl9ib2FyZCwgdGhpcy5fYm91bmRzKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZUJvYXJkRXhwYW5kU3RhdHVzKGQuZm9udFNpemUpLCAhMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fdFRlbXAgPSBudWxsLCB0aGlzLl9kdFRlbXAgPSBudWxsLCAhMDtcbiAgICB9XG4gICAgbGF5b3V0KHdvcmRzLCBjb25maWcpIHtcbiAgICAgICAgdGhpcy5pbml0UHJvZ3Jlc3NpdmUoKSwgdGhpcy5yZXN1bHQgPSBbXSwgdGhpcy5fc2l6ZSA9IFsgY29uZmlnLndpZHRoLCBjb25maWcuaGVpZ2h0IF0sIFxuICAgICAgICB0aGlzLmNsZWFyQ2FjaGUoKSwgdGhpcy5fb3JpZ2luU2l6ZSA9IFsgLi4udGhpcy5fc2l6ZSBdO1xuICAgICAgICBjb25zdCBjb250ZXh0QW5kUmF0aW8gPSB0aGlzLmdldENvbnRleHQodmdsb2JhbC5jcmVhdGVDYW52YXMoe1xuICAgICAgICAgICAgd2lkdGg6IDEsXG4gICAgICAgICAgICBoZWlnaHQ6IDFcbiAgICAgICAgfSkpO1xuICAgICAgICB0aGlzLmNvbnRleHRBbmRSYXRpbyA9IGNvbnRleHRBbmRSYXRpbywgdGhpcy5fYm9hcmQgPSBuZXcgQXJyYXkoKHRoaXMuX3NpemVbMF0gPj4gNSkgKiB0aGlzLl9zaXplWzFdKS5maWxsKDApLCBcbiAgICAgICAgdGhpcy5fYm91bmRzID0gbnVsbDtcbiAgICAgICAgd29yZHMubGVuZ3RoO1xuICAgICAgICB0aGlzLnJlc3VsdCA9IFtdO1xuICAgICAgICBjb25zdCBkYXRhID0gd29yZHMubWFwKCgoZCwgaSkgPT4gKHtcbiAgICAgICAgICAgIHRleHQ6IHRoaXMuZ2V0VGV4dChkKSxcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6IHRoaXMuZ2V0VGV4dEZvbnRGYW1pbHkoZCksXG4gICAgICAgICAgICBmb250U3R5bGU6IHRoaXMuZ2V0VGV4dEZvbnRTdHlsZShkKSxcbiAgICAgICAgICAgIGZvbnRXZWlnaHQ6IHRoaXMuZ2V0VGV4dEZvbnRXZWlnaHQoZCksXG4gICAgICAgICAgICBhbmdsZTogdGhpcy5nZXRUZXh0Um90YXRlKGQsIGkpLFxuICAgICAgICAgICAgZm9udFNpemU6IH5+dGhpcy5nZXRUZXh0Rm9udFNpemUoZCksXG4gICAgICAgICAgICBwYWRkaW5nOiB0aGlzLmdldFRleHRQYWRkaW5nKGQpLFxuICAgICAgICAgICAgeG9mZjogMCxcbiAgICAgICAgICAgIHlvZmY6IDAsXG4gICAgICAgICAgICB4MTogMCxcbiAgICAgICAgICAgIHkxOiAwLFxuICAgICAgICAgICAgeDA6IDAsXG4gICAgICAgICAgICB5MDogMCxcbiAgICAgICAgICAgIGhhc1RleHQ6ICExLFxuICAgICAgICAgICAgc3ByaXRlOiBudWxsLFxuICAgICAgICAgICAgZGF0dW06IGQsXG4gICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgIHdpZHRoOiAwLFxuICAgICAgICAgICAgaGVpZ2h0OiAwXG4gICAgICAgIH0pKSkuc29ydCgoZnVuY3Rpb24oYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIGIuZm9udFNpemUgLSBhLmZvbnRTaXplO1xuICAgICAgICB9KSk7XG4gICAgICAgIGlmICh0aGlzLm9yaWdpbmFsRGF0YSA9IGRhdGEsIHRoaXMuZGF0YSA9IGRhdGEsIHRoaXMucHJvZ3Jlc3NpdmVSdW4oKSwgIXRoaXMub3B0aW9ucy5jbGlwICYmIHRoaXMub3B0aW9ucy5lbmxhcmdlICYmIHRoaXMuX2JvdW5kcyAmJiB0aGlzLnNocmlua0JvYXJkKHRoaXMuX2JvdW5kcyksIFxuICAgICAgICB0aGlzLl9ib3VuZHMgJiYgWyBcImNhcmRpb2lkXCIsIFwidHJpYW5nbGVcIiwgXCJ0cmlhbmdsZS11cHJpZ2h0XCIgXS5pbmNsdWRlcyh0aGlzLm9wdGlvbnMuc2hhcGUpKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50Q2VudGVyWSA9ICh0aGlzLl9ib3VuZHNbMF0ueSArIHRoaXMuX2JvdW5kc1sxXS55KSAvIDI7XG4gICAgICAgICAgICB0aGlzLl9keSA9IC0oY3VycmVudENlbnRlclkgLSB0aGlzLl9vcmlnaW5TaXplWzFdIC8gMik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0O1xuICAgIH1cbiAgICBmb3JtYXRUYWdJdGVtKHdvcmRzKSB7XG4gICAgICAgIGNvbnN0IHNpemUgPSB0aGlzLl9zaXplLCB6b29tUmF0aW8gPSB0aGlzLnpvb21SYXRpbygpLCBnbG9iYWxEeSA9IHRoaXMuZHkoKSwgZHggPSBzaXplWzBdID4+IDEsIGR5ID0gc2l6ZVsxXSA+PiAxLCBuID0gd29yZHMubGVuZ3RoLCByZXN1bHQgPSBbXTtcbiAgICAgICAgbGV0IHcsIHQ7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgKytpKSB3ID0gd29yZHNbaV0sIHQgPSB7fSwgdC5kYXR1bSA9IHcuZGF0dW0sIHQueCA9ICh3LnggKyBkeCkgKiB6b29tUmF0aW8sIFxuICAgICAgICB0LnkgPSAody55ICsgZHkgKyBnbG9iYWxEeSkgKiB6b29tUmF0aW8sIHQuZm9udEZhbWlseSA9IHcuZm9udEZhbWlseSwgdC5mb250U2l6ZSA9IHcuZm9udFNpemUgKiB6b29tUmF0aW8sIFxuICAgICAgICB0LmZvbnRTdHlsZSA9IHcuZm9udFN0eWxlLCB0LmZvbnRXZWlnaHQgPSB3LmZvbnRXZWlnaHQsIHQuYW5nbGUgPSB3LmFuZ2xlLCByZXN1bHQucHVzaCh0KTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgb3V0cHV0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vdXRwdXRDYWxsYmFjayA/IHRoaXMub3V0cHV0Q2FsbGJhY2sodGhpcy5mb3JtYXRUYWdJdGVtKHRoaXMucmVzdWx0KSkgOiB0aGlzLmZvcm1hdFRhZ0l0ZW0odGhpcy5yZXN1bHQpO1xuICAgIH1cbiAgICBwcm9ncmVzc2l2ZU91dHB1dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3V0cHV0Q2FsbGJhY2sgPyB0aGlzLm91dHB1dENhbGxiYWNrKHRoaXMuZm9ybWF0VGFnSXRlbSh0aGlzLnByb2dyZXNzaXZlUmVzdWx0KSkgOiB0aGlzLmZvcm1hdFRhZ0l0ZW0odGhpcy5wcm9ncmVzc2l2ZVJlc3VsdCk7XG4gICAgfVxuICAgIHVwZGF0ZUJvYXJkRXhwYW5kU3RhdHVzKGZvbnRTaXplKSB7XG4gICAgICAgIHRoaXMuX2lzQm9hcmRFeHBhbmRDb21wbGV0ZWQgPSBmb250U2l6ZSAqICh0aGlzLl9vcmlnaW5TaXplWzBdIC8gdGhpcy5fc2l6ZVswXSkgPCB0aGlzLm9wdGlvbnMubWluRm9udFNpemU7XG4gICAgfVxuICAgIHNob3VsZFNocmlua0NvbnRpbnVlKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMub3B0aW9ucy5jbGlwICYmIHRoaXMub3B0aW9ucy5zaHJpbmsgJiYgIXRoaXMuX2lzQm9hcmRFeHBhbmRDb21wbGV0ZWQ7XG4gICAgfVxuICAgIHNocmlua0JvYXJkKGJvdW5kcykge1xuICAgICAgICBjb25zdCBsZWZ0VG9wUG9pbnQgPSBib3VuZHNbMF0sIHJpZ2h0Qm90dG9tUG9pbnQgPSBib3VuZHNbMV07XG4gICAgICAgIGlmIChyaWdodEJvdHRvbVBvaW50LnggPj0gdGhpcy5fc2l6ZVswXSB8fCByaWdodEJvdHRvbVBvaW50LnkgPj0gdGhpcy5fc2l6ZVsxXSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBtaW5YVmFsdWUgPSBNYXRoLm1pbihsZWZ0VG9wUG9pbnQueCwgdGhpcy5fc2l6ZVswXSAtIHJpZ2h0Qm90dG9tUG9pbnQueCksIG1pbllWYWx1ZSA9IE1hdGgubWluKGxlZnRUb3BQb2ludC55LCB0aGlzLl9zaXplWzFdIC0gcmlnaHRCb3R0b21Qb2ludC55KSwgbWluUmF0aW8gPSAyICogTWF0aC5taW4obWluWFZhbHVlIC8gdGhpcy5fc2l6ZVswXSwgbWluWVZhbHVlIC8gdGhpcy5fc2l6ZVsxXSk7XG4gICAgICAgIHRoaXMuX3NpemUgPSB0aGlzLl9zaXplLm1hcCgodiA9PiB2ICogKDEgLSBtaW5SYXRpbykpKTtcbiAgICB9XG4gICAgZXhwYW5kQm9hcmQoYm9hcmQsIGJvdW5kcywgZmFjdG9yKSB7XG4gICAgICAgIGNvbnN0IGV4cGFuZGVkTGVmdFdpZHRoID0gdGhpcy5fc2l6ZVswXSAqIChmYWN0b3IgfHwgMS4xKSAtIHRoaXMuX3NpemVbMF0gPj4gNTtcbiAgICAgICAgbGV0IGRpZmZXaWR0aCA9IDIgKiBleHBhbmRlZExlZnRXaWR0aCA+IDIgPyBleHBhbmRlZExlZnRXaWR0aCA6IDI7XG4gICAgICAgIGRpZmZXaWR0aCAlIDIgIT0gMCAmJiBkaWZmV2lkdGgrKztcbiAgICAgICAgbGV0IGRpZmZIZWlnaHQgPSBNYXRoLmNlaWwodGhpcy5fc2l6ZVsxXSAqIChkaWZmV2lkdGggPDwgNSkgLyB0aGlzLl9zaXplWzBdKTtcbiAgICAgICAgZGlmZkhlaWdodCAlIDIgIT0gMCAmJiBkaWZmSGVpZ2h0Kys7XG4gICAgICAgIGNvbnN0IHcgPSB0aGlzLl9zaXplWzBdLCBoID0gdGhpcy5fc2l6ZVsxXSwgd2lkdGhBcnIgPSBuZXcgQXJyYXkoZGlmZldpZHRoKS5maWxsKDApLCBoZWlnaHRBcnIgPSBuZXcgQXJyYXkoZGlmZkhlaWdodCAvIDIgKiAoZGlmZldpZHRoICsgKHcgPj4gNSkpKS5maWxsKDApO1xuICAgICAgICB0aGlzLmluc2VydFplcm9zVG9BcnJheShib2FyZCwgaCAqICh3ID4+IDUpLCBoZWlnaHRBcnIubGVuZ3RoICsgZGlmZldpZHRoIC8gMik7XG4gICAgICAgIGZvciAobGV0IGkgPSBoIC0gMTsgaSA+IDA7IGktLSkgdGhpcy5pbnNlcnRaZXJvc1RvQXJyYXkoYm9hcmQsIGkgKiAodyA+PiA1KSwgd2lkdGhBcnIubGVuZ3RoKTtcbiAgICAgICAgdGhpcy5pbnNlcnRaZXJvc1RvQXJyYXkoYm9hcmQsIDAsIGhlaWdodEFyci5sZW5ndGggKyBkaWZmV2lkdGggLyAyKSwgdGhpcy5fc2l6ZSA9IFsgdyArIChkaWZmV2lkdGggPDwgNSksIGggKyBkaWZmSGVpZ2h0IF0sIFxuICAgICAgICBib3VuZHMgJiYgKGJvdW5kc1swXS54ICs9IChkaWZmV2lkdGggPDwgNSkgLyAyLCBib3VuZHNbMF0ueSArPSBkaWZmSGVpZ2h0IC8gMiwgYm91bmRzWzFdLnggKz0gKGRpZmZXaWR0aCA8PCA1KSAvIDIsIFxuICAgICAgICBib3VuZHNbMV0ueSArPSBkaWZmSGVpZ2h0IC8gMik7XG4gICAgfVxuICAgIGluc2VydFplcm9zVG9BcnJheShhcnJheSwgaW5kZXgsIGxlbmd0aCkge1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmN1c3RvbUluc2VydFplcm9zVG9BcnJheSkgcmV0dXJuIHRoaXMub3B0aW9ucy5jdXN0b21JbnNlcnRaZXJvc1RvQXJyYXkoYXJyYXksIGluZGV4LCBsZW5ndGgpO1xuICAgICAgICBjb25zdCBsZW4gPSBNYXRoLmZsb29yKGxlbmd0aCAvIDZlNCksIHJlc3RMZW4gPSBsZW5ndGggJSA2ZTQ7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIGFycmF5LnNwbGljZShpbmRleCArIDZlNCAqIGksIDAsIC4uLm5ldyBBcnJheSg2ZTQpLmZpbGwoMCkpO1xuICAgICAgICBhcnJheS5zcGxpY2UoaW5kZXggKyA2ZTQgKiBsZW4sIDAsIC4uLm5ldyBBcnJheShyZXN0TGVuKS5maWxsKDApKTtcbiAgICB9XG4gICAgZ2V0Q29udGV4dChjYW52YXMpIHtcbiAgICAgICAgY2FudmFzLndpZHRoID0gMSwgY2FudmFzLmhlaWdodCA9IDE7XG4gICAgICAgIGNvbnN0IGltYWdlRGF0YSA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiwge1xuICAgICAgICAgICAgd2lsbFJlYWRGcmVxdWVudGx5OiAhMFxuICAgICAgICB9KS5nZXRJbWFnZURhdGEoMCwgMCwgMSwgMSksIHJhdGlvID0gTWF0aC5zcXJ0KGltYWdlRGF0YS5kYXRhLmxlbmd0aCA+PiAyKTtcbiAgICAgICAgY2FudmFzLndpZHRoID0gKHRoaXMuY3cgPDwgNSkgLyByYXRpbywgY2FudmFzLmhlaWdodCA9IHRoaXMuY2ggLyByYXRpbztcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiwge1xuICAgICAgICAgICAgd2lsbFJlYWRGcmVxdWVudGx5OiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuZmlsbFN0eWxlID0gY29udGV4dC5zdHJva2VTdHlsZSA9IFwicmVkXCIsIGNvbnRleHQudGV4dEFsaWduID0gXCJjZW50ZXJcIiwgXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgICAgICAgICByYXRpbzogcmF0aW8sXG4gICAgICAgICAgICBjYW52YXM6IGNhbnZhc1xuICAgICAgICB9O1xuICAgIH1cbiAgICBwbGFjZShib2FyZCwgdGFnLCBib3VuZHMsIG1heFJhZGl1cykge1xuICAgICAgICBsZXQgaXNDb2xsaWRlID0gITE7XG4gICAgICAgIGlmICh0aGlzLnNob3VsZFNocmlua0NvbnRpbnVlKCkgJiYgKHRhZy53aWR0aCA+IHRoaXMuX3NpemVbMF0gfHwgdGFnLmhlaWdodCA+IHRoaXMuX3NpemVbMV0pKSByZXR1cm4gdGhpcy5fcGxhY2VTdGF0dXMgPSAxLCBcbiAgICAgICAgITE7XG4gICAgICAgIGNvbnN0IGR0ID0gdGhpcy5yYW5kb20oKSA8IC41ID8gMSA6IC0xO1xuICAgICAgICBpZiAoIXRoaXMuc2hvdWxkU2hyaW5rQ29udGludWUoKSAmJiB0aGlzLmlzU2l6ZUxhcmdlclRoYW5NYXgodGFnLCBkdCkpIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCBzdGFydFggPSB0YWcueCwgc3RhcnRZID0gdGFnLnksIG1heERlbHRhID0gTWF0aC5zcXJ0KHRoaXMuX3NpemVbMF0gKiB0aGlzLl9zaXplWzBdICsgdGhpcy5fc2l6ZVsxXSAqIHRoaXMuX3NpemVbMV0pLCBzID0gdGhpcy5zcGlyYWwodGhpcy5fc2l6ZSk7XG4gICAgICAgIGxldCBkeGR5LCBkeCwgZHksIF90YWcsIHQgPSAtZHQ7XG4gICAgICAgIGZvciAodGhpcy5fdFRlbXAgPSBudWxsLCB0aGlzLl9kdFRlbXAgPSBudWxsOyBkeGR5ID0gcyh0ICs9IGR0KTsgKSB7XG4gICAgICAgICAgICBkeCA9IGR4ZHlbMF0sIGR5ID0gZHhkeVsxXTtcbiAgICAgICAgICAgIGNvbnN0IHJhZGl1cyA9IE1hdGguc3FydChkeCAqKiAyICsgZHkgKiogMik7XG4gICAgICAgICAgICBsZXQgcmFkID0gTWF0aC5hdGFuKGR5IC8gZHgpO1xuICAgICAgICAgICAgZHggPCAwID8gcmFkICs9IE1hdGguUEkgOiBkeSA8IDAgJiYgKHJhZCA9IDIgKiBNYXRoLlBJICsgcmFkKTtcbiAgICAgICAgICAgIGNvbnN0IHJ4ID0gdGhpcy5zaGFwZShyYWQpO1xuICAgICAgICAgICAgaWYgKE1hdGgubWluKE1hdGguYWJzKGR4KSwgTWF0aC5hYnMoZHkpKSA+PSBtYXhEZWx0YSkgYnJlYWs7XG4gICAgICAgICAgICBpZiAocmFkaXVzID49IG1heFJhZGl1cykgaXNDb2xsaWRlICYmIG51bGwgPT09IHRoaXMuX3RUZW1wICYmICh0aGlzLl90VGVtcCA9IHQsIFxuICAgICAgICAgICAgdGhpcy5fZHRUZW1wID0gZHQpOyBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodGFnLnggPSBzdGFydFggKyB+fihyYWRpdXMgKiByeCAqIE1hdGguY29zKC1yYWQpKSwgdGFnLnkgPSBzdGFydFkgKyB+fihyYWRpdXMgKiByeCAqIE1hdGguc2luKC1yYWQpKSwgXG4gICAgICAgICAgICAgICAgX3RhZyA9IHRhZywgdGhpcy5vcHRpb25zLmNsaXApIGlmICh0aGlzLnNob3VsZFNocmlua0NvbnRpbnVlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzUGFydE91dHNpZGUoX3RhZywgdGhpcy5fc2l6ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQ29sbGlkZSAmJiBudWxsID09PSB0aGlzLl90VGVtcCAmJiAodGhpcy5fdFRlbXAgPSB0LCB0aGlzLl9kdFRlbXAgPSBkdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0Z1bGxPdXRzaWRlKF90YWcsIHRoaXMuX3NpemUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc0NvbGxpZGUgJiYgbnVsbCA9PT0gdGhpcy5fdFRlbXAgJiYgKHRoaXMuX3RUZW1wID0gdCwgdGhpcy5fZHRUZW1wID0gZHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaXNQYXJ0T3V0c2lkZShfdGFnLCB0aGlzLl9zaXplKSAmJiAoX3RhZyA9IGNsaXBJbm5lclRhZyhfdGFnLCB0aGlzLl9zaXplKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpc1BhcnRPdXRzaWRlKF90YWcsIHRoaXMuX3NpemUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzQ29sbGlkZSAmJiBudWxsID09PSB0aGlzLl90VGVtcCAmJiAodGhpcy5fdFRlbXAgPSB0LCB0aGlzLl9kdFRlbXAgPSBkdCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaXNDb2xsaWRlID0gITAsICghYm91bmRzIHx8IGNvbGxpZGVSZWN0cyhfdGFnLCBib3VuZHMpKSAmJiAoIWJvdW5kcyB8fCAhY2xvdWRDb2xsaWRlKF90YWcsIGJvYXJkLCB0aGlzLl9zaXplKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3ByaXRlID0gX3RhZy5zcHJpdGUsIHcgPSBfdGFnLndpZHRoID4+IDUsIHN3ID0gdGhpcy5fc2l6ZVswXSA+PiA1LCBseCA9IF90YWcueCAtICh3IDw8IDQpLCBzeCA9IDEyNyAmIGx4LCBtc3ggPSAzMiAtIHN4LCBoID0gX3RhZy55MSAtIF90YWcueTA7XG4gICAgICAgICAgICAgICAgICAgIGxldCBsYXN0LCB4ID0gKF90YWcueSArIF90YWcueTApICogc3cgKyAobHggPj4gNSk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgaDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IHc7IGkrKykgYm9hcmRbeCArIGldIHw9IGxhc3QgPDwgbXN4IHwgKGkgPCB3ID8gKGxhc3QgPSBzcHJpdGVbaiAqIHcgKyBpXSkgPj4+IHN4IDogMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB4ICs9IHN3O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0YWcuc3ByaXRlID0gbnVsbCwgX3RhZy5zcHJpdGUgPSBudWxsLCAhMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHRoaXMuX3RUZW1wICYmICh0aGlzLl9wbGFjZVN0YXR1cyA9IDMpLCAhdGhpcy5zaG91bGRTaHJpbmtDb250aW51ZSgpICYmIHRoaXMuc2V0Q2FjaGUoX3RhZywgZHQpLCBcbiAgICAgICAgITE7XG4gICAgfVxuICAgIGNsZWFyQ2FjaGUoKSB7XG4gICAgICAgIHRoaXMuY2FjaGVNYXAuY2xlYXIoKTtcbiAgICB9XG4gICAgc2V0Q2FjaGUodGFnLCBkdCkge1xuICAgICAgICBjb25zdCBjYWNoZUtleSA9IGAke3RhZy5hbmdsZX0tJHtkdH1gLCB3ID0gdGFnLngxIC0gdGFnLngwLCBoID0gdGFnLnkxIC0gdGFnLnkwO1xuICAgICAgICBpZiAoIXRoaXMuY2FjaGVNYXAuaGFzKGNhY2hlS2V5KSkgcmV0dXJuIHZvaWQgdGhpcy5jYWNoZU1hcC5zZXQoY2FjaGVLZXksIHtcbiAgICAgICAgICAgIHdpZHRoOiB3LFxuICAgICAgICAgICAgaGVpZ2h0OiBoXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB7d2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodH0gPSB0aGlzLmNhY2hlTWFwLmdldChjYWNoZUtleSk7XG4gICAgICAgICh3IDwgd2lkdGggJiYgaCA8IGhlaWdodCB8fCB3IDw9IHdpZHRoICYmIGggPCBoZWlnaHQpICYmIHRoaXMuY2FjaGVNYXAuc2V0KGNhY2hlS2V5LCB7XG4gICAgICAgICAgICB3aWR0aDogdyxcbiAgICAgICAgICAgIGhlaWdodDogaFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaXNTaXplTGFyZ2VyVGhhbk1heCh0YWcsIGR0KSB7XG4gICAgICAgIGNvbnN0IGNhY2hlS2V5ID0gYCR7dGFnLmFuZ2xlfS0ke2R0fWA7XG4gICAgICAgIGlmICghdGhpcy5jYWNoZU1hcC5oYXMoY2FjaGVLZXkpKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IHt3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0fSA9IHRoaXMuY2FjaGVNYXAuZ2V0KGNhY2hlS2V5KSwgdyA9IHRhZy54MSAtIHRhZy54MCwgaCA9IHRhZy55MSAtIHRhZy55MDtcbiAgICAgICAgcmV0dXJuIHcgPj0gd2lkdGggJiYgaCA+PSBoZWlnaHQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjbG91ZFNwcml0ZShjb250ZXh0QW5kUmF0aW8sIGQsIGRhdGEsIGRpLCBjdywgY2gpIHtcbiAgICBpZiAoZC5zcHJpdGUpIHJldHVybjtcbiAgICBjb25zdCBjID0gY29udGV4dEFuZFJhdGlvLmNvbnRleHQsIHJhdGlvID0gY29udGV4dEFuZFJhdGlvLnJhdGlvO1xuICAgIGMuc2V0VHJhbnNmb3JtKHJhdGlvLCAwLCAwLCByYXRpbywgMCwgMCksIGMuY2xlYXJSZWN0KDAsIDAsIChjdyA8PCA1KSAvIHJhdGlvLCBjaCAvIHJhdGlvKTtcbiAgICBsZXQgeCA9IDAsIHkgPSAwLCBtYXhoID0gMDtcbiAgICBjb25zdCBuID0gZGF0YS5sZW5ndGg7XG4gICAgbGV0IHcsIHczMiwgaCwgaSwgajtcbiAgICBmb3IgKC0tZGk7ICsrZGkgPCBuOyApIHtcbiAgICAgICAgaWYgKGQgPSBkYXRhW2RpXSwgYy5zYXZlKCksIGMuZm9udCA9IGQuZm9udFN0eWxlICsgXCIgXCIgKyBkLmZvbnRXZWlnaHQgKyBcIiBcIiArIH5+KChkLmZvbnRTaXplICsgMSkgLyByYXRpbykgKyBcInB4IFwiICsgZC5mb250RmFtaWx5LCBcbiAgICAgICAgdyA9IGMubWVhc3VyZVRleHQoZC50ZXh0ICsgXCJtXCIpLndpZHRoICogcmF0aW8sIGggPSBkLmZvbnRTaXplIDw8IDEsIGQuYW5nbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHNyID0gTWF0aC5zaW4oZC5hbmdsZSksIGNyID0gTWF0aC5jb3MoZC5hbmdsZSksIHdjciA9IHcgKiBjciwgd3NyID0gdyAqIHNyLCBoY3IgPSBoICogY3IsIGhzciA9IGggKiBzcjtcbiAgICAgICAgICAgIHcgPSBNYXRoLm1heChNYXRoLmFicyh3Y3IgKyBoc3IpLCBNYXRoLmFicyh3Y3IgLSBoc3IpKSArIDMxID4+IDUgPDwgNSwgaCA9IH5+TWF0aC5tYXgoTWF0aC5hYnMod3NyICsgaGNyKSwgTWF0aC5hYnMod3NyIC0gaGNyKSk7XG4gICAgICAgIH0gZWxzZSB3ID0gdyArIDMxID4+IDUgPDwgNTtcbiAgICAgICAgaWYgKGggPiBtYXhoICYmIChtYXhoID0gaCksIHggKyB3ID49IGN3IDw8IDUgJiYgKHggPSAwLCB5ICs9IG1heGgsIG1heGggPSAwKSwgeSArIGggPj0gY2gpIGJyZWFrO1xuICAgICAgICBjLnRyYW5zbGF0ZSgoeCArICh3ID4+IDEpKSAvIHJhdGlvLCAoeSArIChoID4+IDEpKSAvIHJhdGlvKSwgZC5hbmdsZSAmJiBjLnJvdGF0ZShkLmFuZ2xlKSwgXG4gICAgICAgIGMuZmlsbFRleHQoZC50ZXh0LCAwLCAwKSwgZC5wYWRkaW5nICYmIChjLmxpbmVXaWR0aCA9IDIgKiBkLnBhZGRpbmcsIGMuc3Ryb2tlVGV4dChkLnRleHQsIDAsIDApKSwgXG4gICAgICAgIGMucmVzdG9yZSgpLCBkLndpZHRoID0gdywgZC5oZWlnaHQgPSBoLCBkLnhvZmYgPSB4LCBkLnlvZmYgPSB5LCBkLngxID0gdyA+PiAxLCBkLnkxID0gaCA+PiAxLCBcbiAgICAgICAgZC54MCA9IC1kLngxLCBkLnkwID0gLWQueTEsIGQuaGFzVGV4dCA9ICEwLCB4ICs9IHc7XG4gICAgfVxuICAgIGNvbnN0IHBpeGVscyA9IGMuZ2V0SW1hZ2VEYXRhKDAsIDAsIChjdyA8PCA1KSAvIHJhdGlvLCBjaCAvIHJhdGlvKS5kYXRhLCBzcHJpdGUgPSBbXTtcbiAgICBmb3IgKDstLWRpID49IDA7ICkge1xuICAgICAgICBpZiAoIShkID0gZGF0YVtkaV0pLmhhc1RleHQpIGNvbnRpbnVlO1xuICAgICAgICBmb3IgKHcgPSBkLndpZHRoLCB3MzIgPSB3ID4+IDUsIGggPSBkLnkxIC0gZC55MCwgaSA9IDA7IGkgPCBoICogdzMyOyBpKyspIHNwcml0ZVtpXSA9IDA7XG4gICAgICAgIGlmICh4ID0gZC54b2ZmLCBudWxsID09IHgpIHJldHVybjtcbiAgICAgICAgeSA9IGQueW9mZjtcbiAgICAgICAgbGV0IHNlZW4gPSAwLCBzZWVuUm93ID0gLTE7XG4gICAgICAgIGZvciAoaiA9IDA7IGogPCBoOyBqKyspIHtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB3OyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrID0gdzMyICogaiArIChpID4+IDUpLCBtID0gcGl4ZWxzWyh5ICsgaikgKiAoY3cgPDwgNSkgKyAoeCArIGkpIDw8IDJdID8gMSA8PCAzMSAtIGkgJSAzMiA6IDA7XG4gICAgICAgICAgICAgICAgc3ByaXRlW2tdIHw9IG0sIHNlZW4gfD0gbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlZW4gPyBzZWVuUm93ID0gaiA6IChkLnkwKyssIGgtLSwgai0tLCB5KyspO1xuICAgICAgICB9XG4gICAgICAgIGQueTEgPSBkLnkwICsgc2VlblJvdywgZC5zcHJpdGUgPSBzcHJpdGUuc2xpY2UoMCwgKGQueTEgLSBkLnkwKSAqIHczMik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjbG91ZENvbGxpZGUodGFnLCBib2FyZCwgc2l6ZSkge1xuICAgIGNvbnN0IHN3ID0gc2l6ZVswXSA+PiA1LCBzcHJpdGUgPSB0YWcuc3ByaXRlLCB3ID0gdGFnLndpZHRoID4+IDUsIGx4ID0gdGFnLnggLSAodyA8PCA0KSwgc3ggPSAxMjcgJiBseCwgbXN4ID0gMzIgLSBzeCwgaCA9IHRhZy55MSAtIHRhZy55MDtcbiAgICBsZXQgbGFzdCwgeCA9ICh0YWcueSArIHRhZy55MCkgKiBzdyArIChseCA+PiA1KTtcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IGg7IGorKykge1xuICAgICAgICBsYXN0ID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gdzsgaSsrKSBpZiAoKGxhc3QgPDwgbXN4IHwgKGkgPCB3ID8gKGxhc3QgPSBzcHJpdGVbaiAqIHcgKyBpXSkgPj4+IHN4IDogMCkpICYgYm9hcmRbeCArIGldKSByZXR1cm4gITA7XG4gICAgICAgIHggKz0gc3c7XG4gICAgfVxuICAgIHJldHVybiAhMTtcbn1cblxuZnVuY3Rpb24gY2xvdWRCb3VuZHMoYm91bmRzLCBkKSB7XG4gICAgY29uc3QgYjAgPSBib3VuZHNbMF0sIGIxID0gYm91bmRzWzFdO1xuICAgIGQueCArIGQueDAgPCBiMC54ICYmIChiMC54ID0gZC54ICsgZC54MCksIGQueSArIGQueTAgPCBiMC55ICYmIChiMC55ID0gZC55ICsgZC55MCksIFxuICAgIGQueCArIGQueDEgPiBiMS54ICYmIChiMS54ID0gZC54ICsgZC54MSksIGQueSArIGQueTEgPiBiMS55ICYmIChiMS55ID0gZC55ICsgZC55MSk7XG59XG5cbmZ1bmN0aW9uIGNvbGxpZGVSZWN0cyhhLCBiKSB7XG4gICAgcmV0dXJuIGEueCArIGEueDEgPiBiWzBdLnggJiYgYS54ICsgYS54MCA8IGJbMV0ueCAmJiBhLnkgKyBhLnkxID4gYlswXS55ICYmIGEueSArIGEueTAgPCBiWzFdLnk7XG59XG5cbkNsb3VkTGF5b3V0LmRlZmF1bHRPcHRpb25zID0ge1xuICAgIGVubGFyZ2U6ICExLFxuICAgIG1pbkZvbnRTaXplOiAyLFxuICAgIG1heFNpbmdsZVdvcmRUcnlDb3VudDogMlxufTtcblxuY29uc3QgaXNGdWxsT3V0c2lkZSA9ICh0YWcsIHNpemUpID0+IHRhZy54ICsgdGFnLngwID4gc2l6ZVswXSB8fCB0YWcueSArIHRhZy55MCA+IHNpemVbMF0gfHwgdGFnLnggKyB0YWcueDEgPCAwIHx8IHRhZy55ICsgdGFnLnkxIDwgMCwgaXNQYXJ0T3V0c2lkZSA9ICh0YWcsIHNpemUpID0+IHRhZy54ICsgdGFnLngwIDwgMCB8fCB0YWcueSArIHRhZy55MCA8IDAgfHwgdGFnLnggKyB0YWcueDEgPiBzaXplWzBdIHx8IHRhZy55ICsgdGFnLnkxID4gc2l6ZVsxXTtcblxuZnVuY3Rpb24gY2xpcElubmVyVGFnKHRhZywgc2l6ZSkge1xuICAgIGNvbnN0IHNwcml0ZSA9IHRhZy5zcHJpdGUsIGggPSB0YWcueTEgLSB0YWcueTAsIHcgPSB0YWcud2lkdGggPj4gNTtcbiAgICBsZXQgeCA9IDA7XG4gICAgY29uc3QgX3Nwcml0ZSA9IFtdLCBqcyA9IE1hdGgubWF4KC0odGFnLnkwICsgdGFnLnkpLCAwKSwgamUgPSBNYXRoLm1pbihoICsgKHNpemVbMV0gLSAodGFnLnkxICsgdGFnLnkpKSwgaCksIGlzID0gTWF0aC5tYXgoLSh0YWcueDAgKyB0YWcueCksIDApID4+IDUsIGllID0gTWF0aC5taW4odyArIChzaXplWzBdIC0gKHRhZy54MSArIHRhZy54KSA+PiA1KSArIDEsIHcpO1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgaDsgaisrKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdzsgaSsrKSBqIDwganMgfHwgamUgPD0gaiB8fCBpIDwgaXMgfHwgaWUgPD0gaSB8fCBfc3ByaXRlLnB1c2goc3ByaXRlW3ggKyBpXSk7XG4gICAgICAgIHggKz0gdztcbiAgICB9XG4gICAgY29uc3QgeGwgPSBpcyA8PCA1LCB4ciA9IHcgLSBpZSA8PCA1LCB5YiA9IGpzLCB5dCA9IGggLSBqZTtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0YWcpLCB7XG4gICAgICAgIHdpZHRoOiB0YWcud2lkdGggLSB4bCAtIHhyLFxuICAgICAgICBoZWlnaHQ6IHRhZy5oZWlnaHQgLSB5YiAtIHl0LFxuICAgICAgICB4MDogdGFnLngwICsgeGwsXG4gICAgICAgIHgxOiB0YWcueDEgLSB4cixcbiAgICAgICAgeTA6IHRhZy55MCArIHliLFxuICAgICAgICB5MTogdGFnLnkxIC0geXQsXG4gICAgICAgIHg6IHRhZy54ICsgeGwgLyAyIC0geHIgLyAyLFxuICAgICAgICBzcHJpdGU6IF9zcHJpdGVcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNsb3VkLWxheW91dC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/cloud-layout.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/fast-layout.js":
/*!*****************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/fast-layout.js ***!
  \*****************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FastLayout: () => (/* binding */ FastLayout)\n/* harmony export */ });\n/* harmony import */ var _visactor_vrender_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @visactor/vrender-core */ \"(ssr)/./node_modules/.pnpm/@visactor+vrender-core@0.22.16/node_modules/@visactor/vrender-core/es/graphic/bounds.js\");\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/base.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.19.7/node_modules/@visactor/vutils/es/common/merge.js\");\n\n\n\n\n\n\nclass FastLayout extends _base__WEBPACK_IMPORTED_MODULE_0__.BaseLayout {\n    constructor(options) {\n        super((0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({}, FastLayout.defaultOptions, options)), this.random = this.options.random ? Math.random : () => 0, \n        this.aspectRatio = 1;\n    }\n    fit(word) {\n        for (let i = 0, len = this.result.length; i < len; i++) if (isOverlap(word, this.result[i])) return !1;\n        return !0;\n    }\n    getTextInfo(datum, index) {\n        const info = {\n            datum: datum,\n            fontSize: this.getTextFontSize(datum),\n            fontWeight: this.getTextFontWeight(datum),\n            fontStyle: this.getTextFontStyle(datum),\n            fontFamily: this.getTextFontFamily(datum),\n            angle: this.getTextRotate(datum, index),\n            text: this.getText(datum) + \"\",\n            x: this.center[0],\n            y: this.center[1]\n        }, bounds = (0,_visactor_vrender_core__WEBPACK_IMPORTED_MODULE_2__.getTextBounds)(info);\n        return info.width = bounds.width(), info.height = bounds.height(), info.top = this.center[1] - info.height + .21 * info.height, \n        info.left = this.center[0] - info.width / 2, info;\n    }\n    layoutWord(index) {\n        const info = this.getTextInfo(this.data[index], index);\n        let angle = 2 * Math.PI, radius = 0, left = info.left, top = info.top;\n        const width = info.width, height = info.height;\n        let rx = 1, isFit = this.fit(info);\n        for (;!isFit && radius < this.maxRadius; ) radius += .5, rx = this.shape(radius / this.maxRadius * 2 * Math.PI), \n        angle += .5 * (this.options.random ? this.random() > .5 ? 1 : -1 : index % 2 == 0 ? 1 : -1), \n        left = this.center[0] - width / 2 + radius * rx * Math.cos(angle) * this.aspectRatio, \n        top = this.center[1] - height / 2 + radius * rx * Math.sin(angle), info.left = left, \n        info.top = top, info.x = left + width / 2, info.y = top + height / 2, isFit = this.fit(info);\n        return !!isFit && (!!(this.options.clip || info.left >= 0 && info.left + info.width <= this.width && info.top >= 0 && info.top + info.height <= this.height) && (this.result.push(info), \n        !0));\n    }\n    layout(data, config) {\n        if (!(null == data ? void 0 : data.length)) return [];\n        this.initProgressive(), this.result = [], this.maxRadius = Math.sqrt(config.width * config.width + config.height * config.height) / 2, \n        this.center = [ config.width / 2, config.height / 2 ], this.width = config.width, \n        this.height = config.height, this.data = data.sort(((a, b) => this.getTextFontSize(b) - this.getTextFontSize(a)));\n        let i = 0;\n        for (;i < data.length; ) {\n            this.layoutWord(i);\n            if (i++, this.progressiveIndex = i, this.exceedTime()) break;\n        }\n        return this.result;\n    }\n}\n\nfunction isOverlap(a, b) {\n    return !(a.left + a.width < b.left || a.top + a.height < b.top || a.left > b.left + b.width || a.top > b.top + b.height);\n}\n\n//# sourceMappingURL=fast-layout.js.map\nFastLayout.defaultOptions = {\n    enlarge: !1\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXdvcmRjbG91ZEAwLjE2LjExL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItd29yZGNsb3VkL2VzL2Zhc3QtbGF5b3V0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBdUQ7O0FBRW5COztBQUVLOztBQUVsQyx5QkFBeUIsNkNBQVU7QUFDMUM7QUFDQSxjQUFjLDREQUFLLEdBQUc7QUFDdEI7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELFNBQVM7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLFdBQVcscUVBQWE7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsbUNBQW1DO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxpQkFBaUI7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Zpc2FjdG9yLW5leHQtdGVtcGxhdGUvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXdvcmRjbG91ZEAwLjE2LjExL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItd29yZGNsb3VkL2VzL2Zhc3QtbGF5b3V0LmpzPzVlNmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0VGV4dEJvdW5kcyB9IGZyb20gXCJAdmlzYWN0b3IvdnJlbmRlci1jb3JlXCI7XG5cbmltcG9ydCB7IEJhc2VMYXlvdXQgfSBmcm9tIFwiLi9iYXNlXCI7XG5cbmltcG9ydCB7IG1lcmdlIH0gZnJvbSBcIkB2aXNhY3Rvci92dXRpbHNcIjtcblxuZXhwb3J0IGNsYXNzIEZhc3RMYXlvdXQgZXh0ZW5kcyBCYXNlTGF5b3V0IHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKG1lcmdlKHt9LCBGYXN0TGF5b3V0LmRlZmF1bHRPcHRpb25zLCBvcHRpb25zKSksIHRoaXMucmFuZG9tID0gdGhpcy5vcHRpb25zLnJhbmRvbSA/IE1hdGgucmFuZG9tIDogKCkgPT4gMCwgXG4gICAgICAgIHRoaXMuYXNwZWN0UmF0aW8gPSAxO1xuICAgIH1cbiAgICBmaXQod29yZCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gdGhpcy5yZXN1bHQubGVuZ3RoOyBpIDwgbGVuOyBpKyspIGlmIChpc092ZXJsYXAod29yZCwgdGhpcy5yZXN1bHRbaV0pKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgZ2V0VGV4dEluZm8oZGF0dW0sIGluZGV4KSB7XG4gICAgICAgIGNvbnN0IGluZm8gPSB7XG4gICAgICAgICAgICBkYXR1bTogZGF0dW0sXG4gICAgICAgICAgICBmb250U2l6ZTogdGhpcy5nZXRUZXh0Rm9udFNpemUoZGF0dW0pLFxuICAgICAgICAgICAgZm9udFdlaWdodDogdGhpcy5nZXRUZXh0Rm9udFdlaWdodChkYXR1bSksXG4gICAgICAgICAgICBmb250U3R5bGU6IHRoaXMuZ2V0VGV4dEZvbnRTdHlsZShkYXR1bSksXG4gICAgICAgICAgICBmb250RmFtaWx5OiB0aGlzLmdldFRleHRGb250RmFtaWx5KGRhdHVtKSxcbiAgICAgICAgICAgIGFuZ2xlOiB0aGlzLmdldFRleHRSb3RhdGUoZGF0dW0sIGluZGV4KSxcbiAgICAgICAgICAgIHRleHQ6IHRoaXMuZ2V0VGV4dChkYXR1bSkgKyBcIlwiLFxuICAgICAgICAgICAgeDogdGhpcy5jZW50ZXJbMF0sXG4gICAgICAgICAgICB5OiB0aGlzLmNlbnRlclsxXVxuICAgICAgICB9LCBib3VuZHMgPSBnZXRUZXh0Qm91bmRzKGluZm8pO1xuICAgICAgICByZXR1cm4gaW5mby53aWR0aCA9IGJvdW5kcy53aWR0aCgpLCBpbmZvLmhlaWdodCA9IGJvdW5kcy5oZWlnaHQoKSwgaW5mby50b3AgPSB0aGlzLmNlbnRlclsxXSAtIGluZm8uaGVpZ2h0ICsgLjIxICogaW5mby5oZWlnaHQsIFxuICAgICAgICBpbmZvLmxlZnQgPSB0aGlzLmNlbnRlclswXSAtIGluZm8ud2lkdGggLyAyLCBpbmZvO1xuICAgIH1cbiAgICBsYXlvdXRXb3JkKGluZGV4KSB7XG4gICAgICAgIGNvbnN0IGluZm8gPSB0aGlzLmdldFRleHRJbmZvKHRoaXMuZGF0YVtpbmRleF0sIGluZGV4KTtcbiAgICAgICAgbGV0IGFuZ2xlID0gMiAqIE1hdGguUEksIHJhZGl1cyA9IDAsIGxlZnQgPSBpbmZvLmxlZnQsIHRvcCA9IGluZm8udG9wO1xuICAgICAgICBjb25zdCB3aWR0aCA9IGluZm8ud2lkdGgsIGhlaWdodCA9IGluZm8uaGVpZ2h0O1xuICAgICAgICBsZXQgcnggPSAxLCBpc0ZpdCA9IHRoaXMuZml0KGluZm8pO1xuICAgICAgICBmb3IgKDshaXNGaXQgJiYgcmFkaXVzIDwgdGhpcy5tYXhSYWRpdXM7ICkgcmFkaXVzICs9IC41LCByeCA9IHRoaXMuc2hhcGUocmFkaXVzIC8gdGhpcy5tYXhSYWRpdXMgKiAyICogTWF0aC5QSSksIFxuICAgICAgICBhbmdsZSArPSAuNSAqICh0aGlzLm9wdGlvbnMucmFuZG9tID8gdGhpcy5yYW5kb20oKSA+IC41ID8gMSA6IC0xIDogaW5kZXggJSAyID09IDAgPyAxIDogLTEpLCBcbiAgICAgICAgbGVmdCA9IHRoaXMuY2VudGVyWzBdIC0gd2lkdGggLyAyICsgcmFkaXVzICogcnggKiBNYXRoLmNvcyhhbmdsZSkgKiB0aGlzLmFzcGVjdFJhdGlvLCBcbiAgICAgICAgdG9wID0gdGhpcy5jZW50ZXJbMV0gLSBoZWlnaHQgLyAyICsgcmFkaXVzICogcnggKiBNYXRoLnNpbihhbmdsZSksIGluZm8ubGVmdCA9IGxlZnQsIFxuICAgICAgICBpbmZvLnRvcCA9IHRvcCwgaW5mby54ID0gbGVmdCArIHdpZHRoIC8gMiwgaW5mby55ID0gdG9wICsgaGVpZ2h0IC8gMiwgaXNGaXQgPSB0aGlzLmZpdChpbmZvKTtcbiAgICAgICAgcmV0dXJuICEhaXNGaXQgJiYgKCEhKHRoaXMub3B0aW9ucy5jbGlwIHx8IGluZm8ubGVmdCA+PSAwICYmIGluZm8ubGVmdCArIGluZm8ud2lkdGggPD0gdGhpcy53aWR0aCAmJiBpbmZvLnRvcCA+PSAwICYmIGluZm8udG9wICsgaW5mby5oZWlnaHQgPD0gdGhpcy5oZWlnaHQpICYmICh0aGlzLnJlc3VsdC5wdXNoKGluZm8pLCBcbiAgICAgICAgITApKTtcbiAgICB9XG4gICAgbGF5b3V0KGRhdGEsIGNvbmZpZykge1xuICAgICAgICBpZiAoIShudWxsID09IGRhdGEgPyB2b2lkIDAgOiBkYXRhLmxlbmd0aCkpIHJldHVybiBbXTtcbiAgICAgICAgdGhpcy5pbml0UHJvZ3Jlc3NpdmUoKSwgdGhpcy5yZXN1bHQgPSBbXSwgdGhpcy5tYXhSYWRpdXMgPSBNYXRoLnNxcnQoY29uZmlnLndpZHRoICogY29uZmlnLndpZHRoICsgY29uZmlnLmhlaWdodCAqIGNvbmZpZy5oZWlnaHQpIC8gMiwgXG4gICAgICAgIHRoaXMuY2VudGVyID0gWyBjb25maWcud2lkdGggLyAyLCBjb25maWcuaGVpZ2h0IC8gMiBdLCB0aGlzLndpZHRoID0gY29uZmlnLndpZHRoLCBcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBjb25maWcuaGVpZ2h0LCB0aGlzLmRhdGEgPSBkYXRhLnNvcnQoKChhLCBiKSA9PiB0aGlzLmdldFRleHRGb250U2l6ZShiKSAtIHRoaXMuZ2V0VGV4dEZvbnRTaXplKGEpKSk7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgZm9yICg7aSA8IGRhdGEubGVuZ3RoOyApIHtcbiAgICAgICAgICAgIHRoaXMubGF5b3V0V29yZChpKTtcbiAgICAgICAgICAgIGlmIChpKyssIHRoaXMucHJvZ3Jlc3NpdmVJbmRleCA9IGksIHRoaXMuZXhjZWVkVGltZSgpKSBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpc092ZXJsYXAoYSwgYikge1xuICAgIHJldHVybiAhKGEubGVmdCArIGEud2lkdGggPCBiLmxlZnQgfHwgYS50b3AgKyBhLmhlaWdodCA8IGIudG9wIHx8IGEubGVmdCA+IGIubGVmdCArIGIud2lkdGggfHwgYS50b3AgPiBiLnRvcCArIGIuaGVpZ2h0KTtcbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmFzdC1sYXlvdXQuanMubWFwXG5GYXN0TGF5b3V0LmRlZmF1bHRPcHRpb25zID0ge1xuICAgIGVubGFyZ2U6ICExXG59OyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/fast-layout.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/grid-layout.js":
/*!*****************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/grid-layout.js ***!
  \*****************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GridLayout: () => (/* binding */ GridLayout)\n/* harmony export */ });\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.19.7/node_modules/@visactor/vutils/es/common/merge.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.19.7/node_modules/@visactor/vutils/es/common/array.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.19.7/node_modules/@visactor/vutils/es/common/isObject.js\");\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/base.js\");\n/* harmony import */ var _visactor_vgrammar_util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @visactor/vgrammar-util */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-util@0.16.11/node_modules/@visactor/vgrammar-util/es/image.js\");\n/* harmony import */ var _visactor_vgrammar_util__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @visactor/vgrammar-util */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-util@0.16.11/node_modules/@visactor/vgrammar-util/es/shapes.js\");\n\n\n\n\n\n\nclass GridLayout extends _base__WEBPACK_IMPORTED_MODULE_0__.BaseLayout {\n    constructor(options) {\n        super((0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({}, GridLayout.defaultOptions, options)), this.fillGridAt = (x, y) => {\n            x >= this.ngx || y >= this.ngy || x < 0 || y < 0 || (this.grid[x][y] = !1);\n        }, this.updateGrid = (gx, gy, gw, gh, info) => {\n            const occupied = info.occupied;\n            let i = occupied.length;\n            for (;i--; ) {\n                const px = gx + occupied[i][0], py = gy + occupied[i][1];\n                px >= this.ngx || py >= this.ngy || px < 0 || py < 0 || this.fillGridAt(px, py);\n            }\n        }, this.gridSize = Math.max(Math.floor(this.options.gridSize), 4);\n    }\n    getPointsAtRadius(radius) {\n        if (this.pointsAtRadius[radius]) return this.pointsAtRadius[radius];\n        const T = 8 * radius;\n        let t = T;\n        const points = [];\n        for (0 === radius && points.push([ this.center[0], this.center[1], 0 ]); t--; ) {\n            const rx = this.shape(t / T * 2 * Math.PI);\n            points.push([ this.center[0] + radius * rx * Math.cos(-t / T * 2 * Math.PI), this.center[1] + radius * rx * Math.sin(-t / T * 2 * Math.PI) * this.options.ellipticity, t / T * 2 * Math.PI ]);\n        }\n        return this.pointsAtRadius[radius] = points, points;\n    }\n    getTextInfo(item, shrinkRatio = 1, index) {\n        var _a;\n        const sizeShrinkRatio = this.options.clip ? 1 : shrinkRatio, fontSize = Math.max(Math.floor((this.isTryRepeatFill ? this.options.fillTextFontSize : this.getTextFontSize(item)) * sizeShrinkRatio), this.options.minFontSize);\n        let word = this.getText(item) + \"\";\n        if (this.options.clip && (word = word.slice(0, Math.ceil(word.length * shrinkRatio))), \n        !word) return null;\n        const fontWeight = this.getTextFontWeight(item), fontStyle = this.getTextFontStyle(item), angle = this.getTextRotate && null !== (_a = this.getTextRotate(item, index)) && void 0 !== _a ? _a : 0, fontFamily = this.getTextFontFamily(item), fcanvas = document.createElement(\"canvas\"), fctx = fcanvas.getContext(\"2d\", {\n            willReadFrequently: !0\n        });\n        fctx.font = fontStyle + \" \" + fontWeight + \" \" + fontSize.toString(10) + \"px \" + fontFamily;\n        const fw = fctx.measureText(word).width, fh = Math.max(fontSize, fctx.measureText(\"m\").width, fctx.measureText(\"Ｗ\").width);\n        let boxWidth = fw + 2 * fh, boxHeight = 3 * fh;\n        const fgw = Math.ceil(boxWidth / this.gridSize), fgh = Math.ceil(boxHeight / this.gridSize);\n        boxWidth = fgw * this.gridSize, boxHeight = fgh * this.gridSize;\n        const fillTextOffsetX = -fw / 2, fillTextOffsetY = .4 * -fh, cgh = Math.ceil((boxWidth * Math.abs(Math.sin(angle)) + boxHeight * Math.abs(Math.cos(angle))) / this.gridSize), cgw = Math.ceil((boxWidth * Math.abs(Math.cos(angle)) + boxHeight * Math.abs(Math.sin(angle))) / this.gridSize), width = cgw * this.gridSize, height = cgh * this.gridSize;\n        fcanvas.setAttribute(\"width\", \"\" + width), fcanvas.setAttribute(\"height\", \"\" + height), \n        fctx.scale(1, 1), fctx.translate(width / 2, height / 2), fctx.rotate(-angle), fctx.font = fontStyle + \" \" + fontWeight + \" \" + fontSize.toString(10) + \"px \" + fontFamily, \n        fctx.fillStyle = \"#000\", fctx.textBaseline = \"middle\", fctx.fillText(word, fillTextOffsetX, fillTextOffsetY);\n        const imageData = fctx.getImageData(0, 0, width, height).data;\n        if (this.exceedTime()) return null;\n        const occupied = [];\n        let gy, gx = cgw;\n        const bounds = [ cgh / 2, cgw / 2, cgh / 2, cgw / 2 ], singleGridLoop = (gx, gy, out) => {\n            let y = this.gridSize;\n            for (;y--; ) {\n                let x = this.gridSize;\n                for (;x--; ) if (imageData[4 * ((gy * this.gridSize + y) * width + (gx * this.gridSize + x)) + 3]) return out.push([ gx, gy ]), \n                gx < bounds[3] && (bounds[3] = gx), gx > bounds[1] && (bounds[1] = gx), gy < bounds[0] && (bounds[0] = gy), \n                void (gy > bounds[2] && (bounds[2] = gy));\n            }\n        };\n        for (;gx--; ) for (gy = cgh; gy--; ) singleGridLoop(gx, gy, occupied);\n        return {\n            datum: item,\n            occupied: occupied,\n            bounds: bounds,\n            gw: cgw,\n            gh: cgh,\n            fillTextOffsetX: fillTextOffsetX,\n            fillTextOffsetY: fillTextOffsetY,\n            fillTextWidth: fw,\n            fillTextHeight: fh,\n            fontSize: fontSize,\n            fontStyle: fontStyle,\n            fontWeight: fontWeight,\n            fontFamily: fontFamily,\n            angle: angle,\n            text: word\n        };\n    }\n    calculateEmptyRate() {\n        const totalCount = this.ngx * this.ngy;\n        let emptyCount = 0;\n        for (let gx = 0; gx < this.ngx; gx++) for (let gy = 0; gy < this.ngy; gy++) this.grid[gx][gy] && emptyCount++;\n        return emptyCount / totalCount;\n    }\n    canFitText(gx, gy, gw, gh, occupied) {\n        let i = occupied.length;\n        for (;i--; ) {\n            const px = gx + occupied[i][0], py = gy + occupied[i][1];\n            if (px >= this.ngx || py >= this.ngy || px < 0 || py < 0) {\n                if (!this.options.drawOutOfBound) return !1;\n            } else if (!this.grid[px][py]) return !1;\n        }\n        return !0;\n    }\n    layoutWord(index, shrinkRatio = 1) {\n        const item = this.data[index], info = this.getTextInfo(item, shrinkRatio, index);\n        if (!info) return !1;\n        if (this.exceedTime()) return !1;\n        if (!this.options.drawOutOfBound && (!this.options.shrink || info.fontSize <= this.options.minFontSize) && !this.options.clip) {\n            const bounds = info.bounds;\n            if (bounds[1] - bounds[3] + 1 > this.ngx || bounds[2] - bounds[0] + 1 > this.ngy) return !1;\n        }\n        let r = this.maxRadius + 1;\n        const tryToPutWordAtPoint = gxy => {\n            const gx = Math.floor(gxy[0] - info.gw / 2), gy = Math.floor(gxy[1] - info.gh / 2), gw = info.gw, gh = info.gh;\n            return !!this.canFitText(gx, gy, gw, gh, info.occupied) && (info.distance = this.maxRadius - r, \n            info.theta = gxy[2], this.outputText(gx, gy, info), this.updateGrid(gx, gy, gw, gh, info), \n            !0);\n        };\n        for (;r--; ) {\n            let points = this.getPointsAtRadius(this.maxRadius - r);\n            this.options.random && (points = [].concat(points), (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_2__.shuffleArray)(points));\n            if (points.some(tryToPutWordAtPoint)) return !0;\n        }\n        return (this.options.clip || !!(this.options.shrink && info.fontSize > this.options.minFontSize)) && this.layoutWord(index, .75 * shrinkRatio);\n    }\n    outputText(gx, gy, info) {\n        const color = this.getTextColor(info), output = {\n            text: info.text,\n            datum: info.datum,\n            color: color,\n            fontStyle: info.fontStyle,\n            fontWeight: info.fontWeight,\n            fontFamily: info.fontFamily,\n            angle: info.angle,\n            width: info.fillTextWidth,\n            height: info.fillTextHeight,\n            x: (gx + info.gw / 2) * this.gridSize,\n            y: (gy + info.gh / 2) * this.gridSize + info.fillTextOffsetY + .5 * info.fontSize,\n            fontSize: info.fontSize\n        };\n        this.result.push(output), this.progressiveResult && this.progressiveResult.push(output);\n    }\n    initGrid(config) {\n        this.grid = [];\n        const shape = this.options.shape;\n        if ((0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(shape)) {\n            const canvas = (0,_visactor_vgrammar_util__WEBPACK_IMPORTED_MODULE_4__.generateMaskCanvas)(shape, config.width, config.height);\n            let imageData = canvas.getContext(\"2d\").getImageData(0, 0, this.ngx * this.gridSize, this.ngy * this.gridSize);\n            this.options.onUpdateMaskCanvas && this.options.onUpdateMaskCanvas(canvas);\n            let i, isEmptyPixel = (0,_visactor_vgrammar_util__WEBPACK_IMPORTED_MODULE_4__.generateIsEmptyPixel)(shape.backgroundColor);\n            const singleGridLoop = (gx, gy) => {\n                let y = this.gridSize;\n                for (;y--; ) {\n                    let x = this.gridSize;\n                    for (;x--; ) if (i = 4, !isEmptyPixel(imageData, gy * this.gridSize + y, gx * this.gridSize + x)) return void (this.grid[gx][gy] = !0);\n                }\n                this.grid[gx][gy] = !1;\n            };\n            let gx = this.ngx;\n            for (;gx--; ) {\n                this.grid[gx] = [];\n                let gy = this.ngy;\n                for (;gy--; ) singleGridLoop(gx, gy), !1 !== this.grid[gx][gy] && (this.grid[gx][gy] = !0);\n            }\n            imageData = isEmptyPixel = void 0;\n        } else {\n            let gx = this.ngx;\n            for (;gx--; ) {\n                this.grid[gx] = [];\n                let gy = this.ngy;\n                for (;gy--; ) this.grid[gx][gy] = !0;\n            }\n        }\n    }\n    canRepeat() {\n        return this.calculateEmptyRate() > .001;\n    }\n    layout(data, config) {\n        this.initProgressive(), this.drawnCount = 0, this.isTryRepeatFill = !1, this.originalData = data, \n        this.data = data, this.pointsAtRadius = [], this.ngx = Math.floor(config.width / this.gridSize), \n        this.ngy = Math.floor(config.height / this.gridSize);\n        const {center: center, maxRadius: maxRadius} = (0,_visactor_vgrammar_util__WEBPACK_IMPORTED_MODULE_5__.getMaxRadiusAndCenter)(this.options.shape, [ config.width, config.height ]);\n        return this.center = config.origin ? [ config.origin[0] / this.gridSize, config.origin[1] / this.gridSize ] : [ center[0] / this.gridSize, center[1] / this.gridSize ], \n        this.maxRadius = Math.floor(maxRadius / this.gridSize), this.initGrid(config), this.result = [], \n        this.progressiveRun();\n    }\n}\n\nGridLayout.defaultOptions = {\n    gridSize: 8,\n    ellipticity: 1,\n    maxSingleWordTryCount: 1\n};\n//# sourceMappingURL=grid-layout.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXdvcmRjbG91ZEAwLjE2LjExL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItd29yZGNsb3VkL2VzL2dyaWQtbGF5b3V0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBaUU7O0FBRTdCOztBQUVzRTs7QUFFbkcseUJBQXlCLDZDQUFVO0FBQzFDO0FBQ0EsY0FBYyw0REFBSyxHQUFHO0FBQ3RCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxrQkFBa0IsS0FBSztBQUN2QjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUZBQWlGLEtBQUs7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLEtBQUs7QUFDdkI7QUFDQSxzQkFBc0IsS0FBSztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsTUFBTSxpQkFBaUIsTUFBTTtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsZUFBZSx1QkFBdUIsZUFBZTtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsS0FBSztBQUNuQjtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxLQUFLO0FBQ25CO0FBQ0EsZ0VBQWdFLDhEQUFZO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksNERBQVE7QUFDcEIsMkJBQTJCLDJFQUFrQjtBQUM3QztBQUNBO0FBQ0Esa0NBQWtDLDZFQUFvQjtBQUN0RDtBQUNBO0FBQ0Esc0JBQXNCLEtBQUs7QUFDM0I7QUFDQSwwQkFBMEIsS0FBSztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixNQUFNO0FBQ3hCO0FBQ0E7QUFDQSxzQkFBc0IsTUFBTTtBQUM1QjtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0Esa0JBQWtCLE1BQU07QUFDeEI7QUFDQTtBQUNBLHNCQUFzQixNQUFNO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxzQ0FBc0MsRUFBRSw4RUFBcUI7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXNhY3Rvci1uZXh0LXRlbXBsYXRlLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0B2aXNhY3Rvcit2Z3JhbW1hci13b3JkY2xvdWRAMC4xNi4xMS9ub2RlX21vZHVsZXMvQHZpc2FjdG9yL3ZncmFtbWFyLXdvcmRjbG91ZC9lcy9ncmlkLWxheW91dC5qcz80ZDZlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzT2JqZWN0LCBtZXJnZSwgc2h1ZmZsZUFycmF5IH0gZnJvbSBcIkB2aXNhY3Rvci92dXRpbHNcIjtcblxuaW1wb3J0IHsgQmFzZUxheW91dCB9IGZyb20gXCIuL2Jhc2VcIjtcblxuaW1wb3J0IHsgZ2VuZXJhdGVJc0VtcHR5UGl4ZWwsIGdlbmVyYXRlTWFza0NhbnZhcywgZ2V0TWF4UmFkaXVzQW5kQ2VudGVyIH0gZnJvbSBcIkB2aXNhY3Rvci92Z3JhbW1hci11dGlsXCI7XG5cbmV4cG9ydCBjbGFzcyBHcmlkTGF5b3V0IGV4dGVuZHMgQmFzZUxheW91dCB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICBzdXBlcihtZXJnZSh7fSwgR3JpZExheW91dC5kZWZhdWx0T3B0aW9ucywgb3B0aW9ucykpLCB0aGlzLmZpbGxHcmlkQXQgPSAoeCwgeSkgPT4ge1xuICAgICAgICAgICAgeCA+PSB0aGlzLm5neCB8fCB5ID49IHRoaXMubmd5IHx8IHggPCAwIHx8IHkgPCAwIHx8ICh0aGlzLmdyaWRbeF1beV0gPSAhMSk7XG4gICAgICAgIH0sIHRoaXMudXBkYXRlR3JpZCA9IChneCwgZ3ksIGd3LCBnaCwgaW5mbykgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb2NjdXBpZWQgPSBpbmZvLm9jY3VwaWVkO1xuICAgICAgICAgICAgbGV0IGkgPSBvY2N1cGllZC5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKDtpLS07ICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHB4ID0gZ3ggKyBvY2N1cGllZFtpXVswXSwgcHkgPSBneSArIG9jY3VwaWVkW2ldWzFdO1xuICAgICAgICAgICAgICAgIHB4ID49IHRoaXMubmd4IHx8IHB5ID49IHRoaXMubmd5IHx8IHB4IDwgMCB8fCBweSA8IDAgfHwgdGhpcy5maWxsR3JpZEF0KHB4LCBweSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHRoaXMuZ3JpZFNpemUgPSBNYXRoLm1heChNYXRoLmZsb29yKHRoaXMub3B0aW9ucy5ncmlkU2l6ZSksIDQpO1xuICAgIH1cbiAgICBnZXRQb2ludHNBdFJhZGl1cyhyYWRpdXMpIHtcbiAgICAgICAgaWYgKHRoaXMucG9pbnRzQXRSYWRpdXNbcmFkaXVzXSkgcmV0dXJuIHRoaXMucG9pbnRzQXRSYWRpdXNbcmFkaXVzXTtcbiAgICAgICAgY29uc3QgVCA9IDggKiByYWRpdXM7XG4gICAgICAgIGxldCB0ID0gVDtcbiAgICAgICAgY29uc3QgcG9pbnRzID0gW107XG4gICAgICAgIGZvciAoMCA9PT0gcmFkaXVzICYmIHBvaW50cy5wdXNoKFsgdGhpcy5jZW50ZXJbMF0sIHRoaXMuY2VudGVyWzFdLCAwIF0pOyB0LS07ICkge1xuICAgICAgICAgICAgY29uc3QgcnggPSB0aGlzLnNoYXBlKHQgLyBUICogMiAqIE1hdGguUEkpO1xuICAgICAgICAgICAgcG9pbnRzLnB1c2goWyB0aGlzLmNlbnRlclswXSArIHJhZGl1cyAqIHJ4ICogTWF0aC5jb3MoLXQgLyBUICogMiAqIE1hdGguUEkpLCB0aGlzLmNlbnRlclsxXSArIHJhZGl1cyAqIHJ4ICogTWF0aC5zaW4oLXQgLyBUICogMiAqIE1hdGguUEkpICogdGhpcy5vcHRpb25zLmVsbGlwdGljaXR5LCB0IC8gVCAqIDIgKiBNYXRoLlBJIF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnBvaW50c0F0UmFkaXVzW3JhZGl1c10gPSBwb2ludHMsIHBvaW50cztcbiAgICB9XG4gICAgZ2V0VGV4dEluZm8oaXRlbSwgc2hyaW5rUmF0aW8gPSAxLCBpbmRleCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IHNpemVTaHJpbmtSYXRpbyA9IHRoaXMub3B0aW9ucy5jbGlwID8gMSA6IHNocmlua1JhdGlvLCBmb250U2l6ZSA9IE1hdGgubWF4KE1hdGguZmxvb3IoKHRoaXMuaXNUcnlSZXBlYXRGaWxsID8gdGhpcy5vcHRpb25zLmZpbGxUZXh0Rm9udFNpemUgOiB0aGlzLmdldFRleHRGb250U2l6ZShpdGVtKSkgKiBzaXplU2hyaW5rUmF0aW8pLCB0aGlzLm9wdGlvbnMubWluRm9udFNpemUpO1xuICAgICAgICBsZXQgd29yZCA9IHRoaXMuZ2V0VGV4dChpdGVtKSArIFwiXCI7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY2xpcCAmJiAod29yZCA9IHdvcmQuc2xpY2UoMCwgTWF0aC5jZWlsKHdvcmQubGVuZ3RoICogc2hyaW5rUmF0aW8pKSksIFxuICAgICAgICAhd29yZCkgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IGZvbnRXZWlnaHQgPSB0aGlzLmdldFRleHRGb250V2VpZ2h0KGl0ZW0pLCBmb250U3R5bGUgPSB0aGlzLmdldFRleHRGb250U3R5bGUoaXRlbSksIGFuZ2xlID0gdGhpcy5nZXRUZXh0Um90YXRlICYmIG51bGwgIT09IChfYSA9IHRoaXMuZ2V0VGV4dFJvdGF0ZShpdGVtLCBpbmRleCkpICYmIHZvaWQgMCAhPT0gX2EgPyBfYSA6IDAsIGZvbnRGYW1pbHkgPSB0aGlzLmdldFRleHRGb250RmFtaWx5KGl0ZW0pLCBmY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSwgZmN0eCA9IGZjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIsIHtcbiAgICAgICAgICAgIHdpbGxSZWFkRnJlcXVlbnRseTogITBcbiAgICAgICAgfSk7XG4gICAgICAgIGZjdHguZm9udCA9IGZvbnRTdHlsZSArIFwiIFwiICsgZm9udFdlaWdodCArIFwiIFwiICsgZm9udFNpemUudG9TdHJpbmcoMTApICsgXCJweCBcIiArIGZvbnRGYW1pbHk7XG4gICAgICAgIGNvbnN0IGZ3ID0gZmN0eC5tZWFzdXJlVGV4dCh3b3JkKS53aWR0aCwgZmggPSBNYXRoLm1heChmb250U2l6ZSwgZmN0eC5tZWFzdXJlVGV4dChcIm1cIikud2lkdGgsIGZjdHgubWVhc3VyZVRleHQoXCLvvLdcIikud2lkdGgpO1xuICAgICAgICBsZXQgYm94V2lkdGggPSBmdyArIDIgKiBmaCwgYm94SGVpZ2h0ID0gMyAqIGZoO1xuICAgICAgICBjb25zdCBmZ3cgPSBNYXRoLmNlaWwoYm94V2lkdGggLyB0aGlzLmdyaWRTaXplKSwgZmdoID0gTWF0aC5jZWlsKGJveEhlaWdodCAvIHRoaXMuZ3JpZFNpemUpO1xuICAgICAgICBib3hXaWR0aCA9IGZndyAqIHRoaXMuZ3JpZFNpemUsIGJveEhlaWdodCA9IGZnaCAqIHRoaXMuZ3JpZFNpemU7XG4gICAgICAgIGNvbnN0IGZpbGxUZXh0T2Zmc2V0WCA9IC1mdyAvIDIsIGZpbGxUZXh0T2Zmc2V0WSA9IC40ICogLWZoLCBjZ2ggPSBNYXRoLmNlaWwoKGJveFdpZHRoICogTWF0aC5hYnMoTWF0aC5zaW4oYW5nbGUpKSArIGJveEhlaWdodCAqIE1hdGguYWJzKE1hdGguY29zKGFuZ2xlKSkpIC8gdGhpcy5ncmlkU2l6ZSksIGNndyA9IE1hdGguY2VpbCgoYm94V2lkdGggKiBNYXRoLmFicyhNYXRoLmNvcyhhbmdsZSkpICsgYm94SGVpZ2h0ICogTWF0aC5hYnMoTWF0aC5zaW4oYW5nbGUpKSkgLyB0aGlzLmdyaWRTaXplKSwgd2lkdGggPSBjZ3cgKiB0aGlzLmdyaWRTaXplLCBoZWlnaHQgPSBjZ2ggKiB0aGlzLmdyaWRTaXplO1xuICAgICAgICBmY2FudmFzLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIFwiXCIgKyB3aWR0aCksIGZjYW52YXMuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIFwiXCIgKyBoZWlnaHQpLCBcbiAgICAgICAgZmN0eC5zY2FsZSgxLCAxKSwgZmN0eC50cmFuc2xhdGUod2lkdGggLyAyLCBoZWlnaHQgLyAyKSwgZmN0eC5yb3RhdGUoLWFuZ2xlKSwgZmN0eC5mb250ID0gZm9udFN0eWxlICsgXCIgXCIgKyBmb250V2VpZ2h0ICsgXCIgXCIgKyBmb250U2l6ZS50b1N0cmluZygxMCkgKyBcInB4IFwiICsgZm9udEZhbWlseSwgXG4gICAgICAgIGZjdHguZmlsbFN0eWxlID0gXCIjMDAwXCIsIGZjdHgudGV4dEJhc2VsaW5lID0gXCJtaWRkbGVcIiwgZmN0eC5maWxsVGV4dCh3b3JkLCBmaWxsVGV4dE9mZnNldFgsIGZpbGxUZXh0T2Zmc2V0WSk7XG4gICAgICAgIGNvbnN0IGltYWdlRGF0YSA9IGZjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIHdpZHRoLCBoZWlnaHQpLmRhdGE7XG4gICAgICAgIGlmICh0aGlzLmV4Y2VlZFRpbWUoKSkgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IG9jY3VwaWVkID0gW107XG4gICAgICAgIGxldCBneSwgZ3ggPSBjZ3c7XG4gICAgICAgIGNvbnN0IGJvdW5kcyA9IFsgY2doIC8gMiwgY2d3IC8gMiwgY2doIC8gMiwgY2d3IC8gMiBdLCBzaW5nbGVHcmlkTG9vcCA9IChneCwgZ3ksIG91dCkgPT4ge1xuICAgICAgICAgICAgbGV0IHkgPSB0aGlzLmdyaWRTaXplO1xuICAgICAgICAgICAgZm9yICg7eS0tOyApIHtcbiAgICAgICAgICAgICAgICBsZXQgeCA9IHRoaXMuZ3JpZFNpemU7XG4gICAgICAgICAgICAgICAgZm9yICg7eC0tOyApIGlmIChpbWFnZURhdGFbNCAqICgoZ3kgKiB0aGlzLmdyaWRTaXplICsgeSkgKiB3aWR0aCArIChneCAqIHRoaXMuZ3JpZFNpemUgKyB4KSkgKyAzXSkgcmV0dXJuIG91dC5wdXNoKFsgZ3gsIGd5IF0pLCBcbiAgICAgICAgICAgICAgICBneCA8IGJvdW5kc1szXSAmJiAoYm91bmRzWzNdID0gZ3gpLCBneCA+IGJvdW5kc1sxXSAmJiAoYm91bmRzWzFdID0gZ3gpLCBneSA8IGJvdW5kc1swXSAmJiAoYm91bmRzWzBdID0gZ3kpLCBcbiAgICAgICAgICAgICAgICB2b2lkIChneSA+IGJvdW5kc1syXSAmJiAoYm91bmRzWzJdID0gZ3kpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgZm9yICg7Z3gtLTsgKSBmb3IgKGd5ID0gY2doOyBneS0tOyApIHNpbmdsZUdyaWRMb29wKGd4LCBneSwgb2NjdXBpZWQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGF0dW06IGl0ZW0sXG4gICAgICAgICAgICBvY2N1cGllZDogb2NjdXBpZWQsXG4gICAgICAgICAgICBib3VuZHM6IGJvdW5kcyxcbiAgICAgICAgICAgIGd3OiBjZ3csXG4gICAgICAgICAgICBnaDogY2doLFxuICAgICAgICAgICAgZmlsbFRleHRPZmZzZXRYOiBmaWxsVGV4dE9mZnNldFgsXG4gICAgICAgICAgICBmaWxsVGV4dE9mZnNldFk6IGZpbGxUZXh0T2Zmc2V0WSxcbiAgICAgICAgICAgIGZpbGxUZXh0V2lkdGg6IGZ3LFxuICAgICAgICAgICAgZmlsbFRleHRIZWlnaHQ6IGZoLFxuICAgICAgICAgICAgZm9udFNpemU6IGZvbnRTaXplLFxuICAgICAgICAgICAgZm9udFN0eWxlOiBmb250U3R5bGUsXG4gICAgICAgICAgICBmb250V2VpZ2h0OiBmb250V2VpZ2h0LFxuICAgICAgICAgICAgZm9udEZhbWlseTogZm9udEZhbWlseSxcbiAgICAgICAgICAgIGFuZ2xlOiBhbmdsZSxcbiAgICAgICAgICAgIHRleHQ6IHdvcmRcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY2FsY3VsYXRlRW1wdHlSYXRlKCkge1xuICAgICAgICBjb25zdCB0b3RhbENvdW50ID0gdGhpcy5uZ3ggKiB0aGlzLm5neTtcbiAgICAgICAgbGV0IGVtcHR5Q291bnQgPSAwO1xuICAgICAgICBmb3IgKGxldCBneCA9IDA7IGd4IDwgdGhpcy5uZ3g7IGd4KyspIGZvciAobGV0IGd5ID0gMDsgZ3kgPCB0aGlzLm5neTsgZ3krKykgdGhpcy5ncmlkW2d4XVtneV0gJiYgZW1wdHlDb3VudCsrO1xuICAgICAgICByZXR1cm4gZW1wdHlDb3VudCAvIHRvdGFsQ291bnQ7XG4gICAgfVxuICAgIGNhbkZpdFRleHQoZ3gsIGd5LCBndywgZ2gsIG9jY3VwaWVkKSB7XG4gICAgICAgIGxldCBpID0gb2NjdXBpZWQubGVuZ3RoO1xuICAgICAgICBmb3IgKDtpLS07ICkge1xuICAgICAgICAgICAgY29uc3QgcHggPSBneCArIG9jY3VwaWVkW2ldWzBdLCBweSA9IGd5ICsgb2NjdXBpZWRbaV1bMV07XG4gICAgICAgICAgICBpZiAocHggPj0gdGhpcy5uZ3ggfHwgcHkgPj0gdGhpcy5uZ3kgfHwgcHggPCAwIHx8IHB5IDwgMCkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5vcHRpb25zLmRyYXdPdXRPZkJvdW5kKSByZXR1cm4gITE7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLmdyaWRbcHhdW3B5XSkgcmV0dXJuICExO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgbGF5b3V0V29yZChpbmRleCwgc2hyaW5rUmF0aW8gPSAxKSB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmRhdGFbaW5kZXhdLCBpbmZvID0gdGhpcy5nZXRUZXh0SW5mbyhpdGVtLCBzaHJpbmtSYXRpbywgaW5kZXgpO1xuICAgICAgICBpZiAoIWluZm8pIHJldHVybiAhMTtcbiAgICAgICAgaWYgKHRoaXMuZXhjZWVkVGltZSgpKSByZXR1cm4gITE7XG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLmRyYXdPdXRPZkJvdW5kICYmICghdGhpcy5vcHRpb25zLnNocmluayB8fCBpbmZvLmZvbnRTaXplIDw9IHRoaXMub3B0aW9ucy5taW5Gb250U2l6ZSkgJiYgIXRoaXMub3B0aW9ucy5jbGlwKSB7XG4gICAgICAgICAgICBjb25zdCBib3VuZHMgPSBpbmZvLmJvdW5kcztcbiAgICAgICAgICAgIGlmIChib3VuZHNbMV0gLSBib3VuZHNbM10gKyAxID4gdGhpcy5uZ3ggfHwgYm91bmRzWzJdIC0gYm91bmRzWzBdICsgMSA+IHRoaXMubmd5KSByZXR1cm4gITE7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHIgPSB0aGlzLm1heFJhZGl1cyArIDE7XG4gICAgICAgIGNvbnN0IHRyeVRvUHV0V29yZEF0UG9pbnQgPSBneHkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZ3ggPSBNYXRoLmZsb29yKGd4eVswXSAtIGluZm8uZ3cgLyAyKSwgZ3kgPSBNYXRoLmZsb29yKGd4eVsxXSAtIGluZm8uZ2ggLyAyKSwgZ3cgPSBpbmZvLmd3LCBnaCA9IGluZm8uZ2g7XG4gICAgICAgICAgICByZXR1cm4gISF0aGlzLmNhbkZpdFRleHQoZ3gsIGd5LCBndywgZ2gsIGluZm8ub2NjdXBpZWQpICYmIChpbmZvLmRpc3RhbmNlID0gdGhpcy5tYXhSYWRpdXMgLSByLCBcbiAgICAgICAgICAgIGluZm8udGhldGEgPSBneHlbMl0sIHRoaXMub3V0cHV0VGV4dChneCwgZ3ksIGluZm8pLCB0aGlzLnVwZGF0ZUdyaWQoZ3gsIGd5LCBndywgZ2gsIGluZm8pLCBcbiAgICAgICAgICAgICEwKTtcbiAgICAgICAgfTtcbiAgICAgICAgZm9yICg7ci0tOyApIHtcbiAgICAgICAgICAgIGxldCBwb2ludHMgPSB0aGlzLmdldFBvaW50c0F0UmFkaXVzKHRoaXMubWF4UmFkaXVzIC0gcik7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMucmFuZG9tICYmIChwb2ludHMgPSBbXS5jb25jYXQocG9pbnRzKSwgc2h1ZmZsZUFycmF5KHBvaW50cykpO1xuICAgICAgICAgICAgaWYgKHBvaW50cy5zb21lKHRyeVRvUHV0V29yZEF0UG9pbnQpKSByZXR1cm4gITA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICh0aGlzLm9wdGlvbnMuY2xpcCB8fCAhISh0aGlzLm9wdGlvbnMuc2hyaW5rICYmIGluZm8uZm9udFNpemUgPiB0aGlzLm9wdGlvbnMubWluRm9udFNpemUpKSAmJiB0aGlzLmxheW91dFdvcmQoaW5kZXgsIC43NSAqIHNocmlua1JhdGlvKTtcbiAgICB9XG4gICAgb3V0cHV0VGV4dChneCwgZ3ksIGluZm8pIHtcbiAgICAgICAgY29uc3QgY29sb3IgPSB0aGlzLmdldFRleHRDb2xvcihpbmZvKSwgb3V0cHV0ID0ge1xuICAgICAgICAgICAgdGV4dDogaW5mby50ZXh0LFxuICAgICAgICAgICAgZGF0dW06IGluZm8uZGF0dW0sXG4gICAgICAgICAgICBjb2xvcjogY29sb3IsXG4gICAgICAgICAgICBmb250U3R5bGU6IGluZm8uZm9udFN0eWxlLFxuICAgICAgICAgICAgZm9udFdlaWdodDogaW5mby5mb250V2VpZ2h0LFxuICAgICAgICAgICAgZm9udEZhbWlseTogaW5mby5mb250RmFtaWx5LFxuICAgICAgICAgICAgYW5nbGU6IGluZm8uYW5nbGUsXG4gICAgICAgICAgICB3aWR0aDogaW5mby5maWxsVGV4dFdpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiBpbmZvLmZpbGxUZXh0SGVpZ2h0LFxuICAgICAgICAgICAgeDogKGd4ICsgaW5mby5ndyAvIDIpICogdGhpcy5ncmlkU2l6ZSxcbiAgICAgICAgICAgIHk6IChneSArIGluZm8uZ2ggLyAyKSAqIHRoaXMuZ3JpZFNpemUgKyBpbmZvLmZpbGxUZXh0T2Zmc2V0WSArIC41ICogaW5mby5mb250U2l6ZSxcbiAgICAgICAgICAgIGZvbnRTaXplOiBpbmZvLmZvbnRTaXplXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucmVzdWx0LnB1c2gob3V0cHV0KSwgdGhpcy5wcm9ncmVzc2l2ZVJlc3VsdCAmJiB0aGlzLnByb2dyZXNzaXZlUmVzdWx0LnB1c2gob3V0cHV0KTtcbiAgICB9XG4gICAgaW5pdEdyaWQoY29uZmlnKSB7XG4gICAgICAgIHRoaXMuZ3JpZCA9IFtdO1xuICAgICAgICBjb25zdCBzaGFwZSA9IHRoaXMub3B0aW9ucy5zaGFwZTtcbiAgICAgICAgaWYgKGlzT2JqZWN0KHNoYXBlKSkge1xuICAgICAgICAgICAgY29uc3QgY2FudmFzID0gZ2VuZXJhdGVNYXNrQ2FudmFzKHNoYXBlLCBjb25maWcud2lkdGgsIGNvbmZpZy5oZWlnaHQpO1xuICAgICAgICAgICAgbGV0IGltYWdlRGF0YSA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIikuZ2V0SW1hZ2VEYXRhKDAsIDAsIHRoaXMubmd4ICogdGhpcy5ncmlkU2l6ZSwgdGhpcy5uZ3kgKiB0aGlzLmdyaWRTaXplKTtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5vblVwZGF0ZU1hc2tDYW52YXMgJiYgdGhpcy5vcHRpb25zLm9uVXBkYXRlTWFza0NhbnZhcyhjYW52YXMpO1xuICAgICAgICAgICAgbGV0IGksIGlzRW1wdHlQaXhlbCA9IGdlbmVyYXRlSXNFbXB0eVBpeGVsKHNoYXBlLmJhY2tncm91bmRDb2xvcik7XG4gICAgICAgICAgICBjb25zdCBzaW5nbGVHcmlkTG9vcCA9IChneCwgZ3kpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgeSA9IHRoaXMuZ3JpZFNpemU7XG4gICAgICAgICAgICAgICAgZm9yICg7eS0tOyApIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHggPSB0aGlzLmdyaWRTaXplO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKDt4LS07ICkgaWYgKGkgPSA0LCAhaXNFbXB0eVBpeGVsKGltYWdlRGF0YSwgZ3kgKiB0aGlzLmdyaWRTaXplICsgeSwgZ3ggKiB0aGlzLmdyaWRTaXplICsgeCkpIHJldHVybiB2b2lkICh0aGlzLmdyaWRbZ3hdW2d5XSA9ICEwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5ncmlkW2d4XVtneV0gPSAhMTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBsZXQgZ3ggPSB0aGlzLm5neDtcbiAgICAgICAgICAgIGZvciAoO2d4LS07ICkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ3JpZFtneF0gPSBbXTtcbiAgICAgICAgICAgICAgICBsZXQgZ3kgPSB0aGlzLm5neTtcbiAgICAgICAgICAgICAgICBmb3IgKDtneS0tOyApIHNpbmdsZUdyaWRMb29wKGd4LCBneSksICExICE9PSB0aGlzLmdyaWRbZ3hdW2d5XSAmJiAodGhpcy5ncmlkW2d4XVtneV0gPSAhMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbWFnZURhdGEgPSBpc0VtcHR5UGl4ZWwgPSB2b2lkIDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgZ3ggPSB0aGlzLm5neDtcbiAgICAgICAgICAgIGZvciAoO2d4LS07ICkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ3JpZFtneF0gPSBbXTtcbiAgICAgICAgICAgICAgICBsZXQgZ3kgPSB0aGlzLm5neTtcbiAgICAgICAgICAgICAgICBmb3IgKDtneS0tOyApIHRoaXMuZ3JpZFtneF1bZ3ldID0gITA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2FuUmVwZWF0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxjdWxhdGVFbXB0eVJhdGUoKSA+IC4wMDE7XG4gICAgfVxuICAgIGxheW91dChkYXRhLCBjb25maWcpIHtcbiAgICAgICAgdGhpcy5pbml0UHJvZ3Jlc3NpdmUoKSwgdGhpcy5kcmF3bkNvdW50ID0gMCwgdGhpcy5pc1RyeVJlcGVhdEZpbGwgPSAhMSwgdGhpcy5vcmlnaW5hbERhdGEgPSBkYXRhLCBcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YSwgdGhpcy5wb2ludHNBdFJhZGl1cyA9IFtdLCB0aGlzLm5neCA9IE1hdGguZmxvb3IoY29uZmlnLndpZHRoIC8gdGhpcy5ncmlkU2l6ZSksIFxuICAgICAgICB0aGlzLm5neSA9IE1hdGguZmxvb3IoY29uZmlnLmhlaWdodCAvIHRoaXMuZ3JpZFNpemUpO1xuICAgICAgICBjb25zdCB7Y2VudGVyOiBjZW50ZXIsIG1heFJhZGl1czogbWF4UmFkaXVzfSA9IGdldE1heFJhZGl1c0FuZENlbnRlcih0aGlzLm9wdGlvbnMuc2hhcGUsIFsgY29uZmlnLndpZHRoLCBjb25maWcuaGVpZ2h0IF0pO1xuICAgICAgICByZXR1cm4gdGhpcy5jZW50ZXIgPSBjb25maWcub3JpZ2luID8gWyBjb25maWcub3JpZ2luWzBdIC8gdGhpcy5ncmlkU2l6ZSwgY29uZmlnLm9yaWdpblsxXSAvIHRoaXMuZ3JpZFNpemUgXSA6IFsgY2VudGVyWzBdIC8gdGhpcy5ncmlkU2l6ZSwgY2VudGVyWzFdIC8gdGhpcy5ncmlkU2l6ZSBdLCBcbiAgICAgICAgdGhpcy5tYXhSYWRpdXMgPSBNYXRoLmZsb29yKG1heFJhZGl1cyAvIHRoaXMuZ3JpZFNpemUpLCB0aGlzLmluaXRHcmlkKGNvbmZpZyksIHRoaXMucmVzdWx0ID0gW10sIFxuICAgICAgICB0aGlzLnByb2dyZXNzaXZlUnVuKCk7XG4gICAgfVxufVxuXG5HcmlkTGF5b3V0LmRlZmF1bHRPcHRpb25zID0ge1xuICAgIGdyaWRTaXplOiA4LFxuICAgIGVsbGlwdGljaXR5OiAxLFxuICAgIG1heFNpbmdsZVdvcmRUcnlDb3VudDogMVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdyaWQtbGF5b3V0LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/grid-layout.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/index.js":
/*!***********************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/index.js ***!
  \***********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   registerWordCloudTransforms: () => (/* binding */ registerWordCloudTransforms),\n/* harmony export */   shapes: () => (/* reexport safe */ _visactor_vgrammar_util__WEBPACK_IMPORTED_MODULE_2__.shapes),\n/* harmony export */   wordcloudTransform: () => (/* binding */ wordcloudTransform)\n/* harmony export */ });\n/* harmony import */ var _visactor_vgrammar_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @visactor/vgrammar-core */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-core@0.16.11/node_modules/@visactor/vgrammar-core/es/core/factory.js\");\n/* harmony import */ var _wordcloud__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./wordcloud */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/wordcloud.js\");\n/* harmony import */ var _visactor_vgrammar_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @visactor/vgrammar-util */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-util@0.16.11/node_modules/@visactor/vgrammar-util/es/shapes.js\");\n\n\n\n\nconst registerWordCloudTransforms = () => {\n    _visactor_vgrammar_core__WEBPACK_IMPORTED_MODULE_0__.Factory.registerTransform(\"wordcloud\", {\n        transform: _wordcloud__WEBPACK_IMPORTED_MODULE_1__.transform,\n        markPhase: \"beforeJoin\"\n    }, !0);\n};\n\nconst wordcloudTransform = _wordcloud__WEBPACK_IMPORTED_MODULE_1__.transform;\n\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXdvcmRjbG91ZEAwLjE2LjExL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItd29yZGNsb3VkL2VzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFrRDs7QUFFVjs7QUFFakM7QUFDUCxJQUFJLDREQUFPO0FBQ1gsbUJBQW1CLGlEQUFTO0FBQzVCO0FBQ0EsS0FBSztBQUNMOztBQUVPLDJCQUEyQixpREFBUzs7QUFFTTtBQUNqRCIsInNvdXJjZXMiOlsid2VicGFjazovL3Zpc2FjdG9yLW5leHQtdGVtcGxhdGUvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXdvcmRjbG91ZEAwLjE2LjExL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItd29yZGNsb3VkL2VzL2luZGV4LmpzPzM0YTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmFjdG9yeSB9IGZyb20gXCJAdmlzYWN0b3IvdmdyYW1tYXItY29yZVwiO1xuXG5pbXBvcnQgeyB0cmFuc2Zvcm0gfSBmcm9tIFwiLi93b3JkY2xvdWRcIjtcblxuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyV29yZENsb3VkVHJhbnNmb3JtcyA9ICgpID0+IHtcbiAgICBGYWN0b3J5LnJlZ2lzdGVyVHJhbnNmb3JtKFwid29yZGNsb3VkXCIsIHtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2Zvcm0sXG4gICAgICAgIG1hcmtQaGFzZTogXCJiZWZvcmVKb2luXCJcbiAgICB9LCAhMCk7XG59O1xuXG5leHBvcnQgY29uc3Qgd29yZGNsb3VkVHJhbnNmb3JtID0gdHJhbnNmb3JtO1xuXG5leHBvcnQgeyBzaGFwZXMgfSBmcm9tIFwiQHZpc2FjdG9yL3ZncmFtbWFyLXV0aWxcIjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/spirals.js":
/*!*************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/spirals.js ***!
  \*************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   spirals: () => (/* binding */ spirals)\n/* harmony export */ });\nconst spirals = {\n    archimedean: archimedeanSpiral,\n    rectangular: rectangularSpiral\n};\n\nfunction archimedeanSpiral(size) {\n    const e = size[0] / size[1];\n    return t => [ e * (t *= .1) * Math.cos(t), t * Math.sin(t) ];\n}\n\nfunction rectangularSpiral(size) {\n    const dx = 4 * size[0] / size[1];\n    let x = 0, y = 0;\n    return t => {\n        const sign = t < 0 ? -1 : 1;\n        switch (Math.sqrt(1 + 4 * sign * t) - sign & 3) {\n          case 0:\n            x += dx;\n            break;\n\n          case 1:\n            y += 4;\n            break;\n\n          case 2:\n            x -= dx;\n            break;\n\n          default:\n            y -= 4;\n        }\n        return [ x, y ];\n    };\n}\n//# sourceMappingURL=spirals.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXdvcmRjbG91ZEAwLjE2LjExL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItd29yZGNsb3VkL2VzL3NwaXJhbHMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdmlzYWN0b3ItbmV4dC10ZW1wbGF0ZS8uL25vZGVfbW9kdWxlcy8ucG5wbS9AdmlzYWN0b3IrdmdyYW1tYXItd29yZGNsb3VkQDAuMTYuMTEvbm9kZV9tb2R1bGVzL0B2aXNhY3Rvci92Z3JhbW1hci13b3JkY2xvdWQvZXMvc3BpcmFscy5qcz82MDg3Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBzcGlyYWxzID0ge1xuICAgIGFyY2hpbWVkZWFuOiBhcmNoaW1lZGVhblNwaXJhbCxcbiAgICByZWN0YW5ndWxhcjogcmVjdGFuZ3VsYXJTcGlyYWxcbn07XG5cbmZ1bmN0aW9uIGFyY2hpbWVkZWFuU3BpcmFsKHNpemUpIHtcbiAgICBjb25zdCBlID0gc2l6ZVswXSAvIHNpemVbMV07XG4gICAgcmV0dXJuIHQgPT4gWyBlICogKHQgKj0gLjEpICogTWF0aC5jb3ModCksIHQgKiBNYXRoLnNpbih0KSBdO1xufVxuXG5mdW5jdGlvbiByZWN0YW5ndWxhclNwaXJhbChzaXplKSB7XG4gICAgY29uc3QgZHggPSA0ICogc2l6ZVswXSAvIHNpemVbMV07XG4gICAgbGV0IHggPSAwLCB5ID0gMDtcbiAgICByZXR1cm4gdCA9PiB7XG4gICAgICAgIGNvbnN0IHNpZ24gPSB0IDwgMCA/IC0xIDogMTtcbiAgICAgICAgc3dpdGNoIChNYXRoLnNxcnQoMSArIDQgKiBzaWduICogdCkgLSBzaWduICYgMykge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHggKz0gZHg7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHkgKz0gNDtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgeCAtPSBkeDtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHkgLT0gNDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gWyB4LCB5IF07XG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNwaXJhbHMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/spirals.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/util.js":
/*!**********************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/util.js ***!
  \**********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   functor: () => (/* binding */ functor),\n/* harmony export */   getMinFontSizeOfEnv: () => (/* binding */ getMinFontSizeOfEnv),\n/* harmony export */   isSupported: () => (/* binding */ isSupported),\n/* harmony export */   randomHslColor: () => (/* binding */ randomHslColor)\n/* harmony export */ });\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.19.7/node_modules/@visactor/vutils/es/common/isFunction.js\");\n\n\nfunction isSupported() {\n    const canvas = document.createElement(\"canvas\");\n    if (!canvas || !canvas.getContext) return !1;\n    const ctx = canvas.getContext(\"2d\");\n    return !!ctx && (!!ctx.getImageData && (!!ctx.fillText && (!!Array.prototype.some && !!Array.prototype.push)));\n}\n\nfunction getMinFontSizeOfEnv() {\n    const ctx = document.createElement(\"canvas\").getContext(\"2d\");\n    let hanWidth, mWidth, size = 20;\n    for (;size; ) {\n        if (ctx.font = size.toString(10) + \"px sans-serif\", ctx.measureText(\"Ｗ\").width === hanWidth && ctx.measureText(\"m\").width === mWidth) return size + 1;\n        hanWidth = ctx.measureText(\"Ｗ\").width, mWidth = ctx.measureText(\"m\").width, size--;\n    }\n    return 12;\n}\n\nconst randomHslColor = (min, max) => \"hsl(\" + (360 * Math.random()).toFixed() + \",\" + (30 * Math.random() + 70).toFixed() + \"%,\" + (Math.random() * (max - min) + min).toFixed() + \"%)\";\n\nfunction functor(d) {\n    return (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(d) ? d : function() {\n        return d;\n    };\n}\n//# sourceMappingURL=util.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXdvcmRjbG91ZEAwLjE2LjExL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItd29yZGNsb3VkL2VzL3V0aWwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBOEM7O0FBRXZDO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQSxVQUFVLE1BQU07QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFTzs7QUFFQTtBQUNQLFdBQVcsNERBQVU7QUFDckI7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXNhY3Rvci1uZXh0LXRlbXBsYXRlLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0B2aXNhY3Rvcit2Z3JhbW1hci13b3JkY2xvdWRAMC4xNi4xMS9ub2RlX21vZHVsZXMvQHZpc2FjdG9yL3ZncmFtbWFyLXdvcmRjbG91ZC9lcy91dGlsLmpzP2RmZmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNGdW5jdGlvbiB9IGZyb20gXCJAdmlzYWN0b3IvdnV0aWxzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1N1cHBvcnRlZCgpIHtcbiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICAgIGlmICghY2FudmFzIHx8ICFjYW52YXMuZ2V0Q29udGV4dCkgcmV0dXJuICExO1xuICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgcmV0dXJuICEhY3R4ICYmICghIWN0eC5nZXRJbWFnZURhdGEgJiYgKCEhY3R4LmZpbGxUZXh0ICYmICghIUFycmF5LnByb3RvdHlwZS5zb21lICYmICEhQXJyYXkucHJvdG90eXBlLnB1c2gpKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRNaW5Gb250U2l6ZU9mRW52KCkge1xuICAgIGNvbnN0IGN0eCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIikuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgIGxldCBoYW5XaWR0aCwgbVdpZHRoLCBzaXplID0gMjA7XG4gICAgZm9yICg7c2l6ZTsgKSB7XG4gICAgICAgIGlmIChjdHguZm9udCA9IHNpemUudG9TdHJpbmcoMTApICsgXCJweCBzYW5zLXNlcmlmXCIsIGN0eC5tZWFzdXJlVGV4dChcIu+8t1wiKS53aWR0aCA9PT0gaGFuV2lkdGggJiYgY3R4Lm1lYXN1cmVUZXh0KFwibVwiKS53aWR0aCA9PT0gbVdpZHRoKSByZXR1cm4gc2l6ZSArIDE7XG4gICAgICAgIGhhbldpZHRoID0gY3R4Lm1lYXN1cmVUZXh0KFwi77y3XCIpLndpZHRoLCBtV2lkdGggPSBjdHgubWVhc3VyZVRleHQoXCJtXCIpLndpZHRoLCBzaXplLS07XG4gICAgfVxuICAgIHJldHVybiAxMjtcbn1cblxuZXhwb3J0IGNvbnN0IHJhbmRvbUhzbENvbG9yID0gKG1pbiwgbWF4KSA9PiBcImhzbChcIiArICgzNjAgKiBNYXRoLnJhbmRvbSgpKS50b0ZpeGVkKCkgKyBcIixcIiArICgzMCAqIE1hdGgucmFuZG9tKCkgKyA3MCkudG9GaXhlZCgpICsgXCIlLFwiICsgKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSArIG1pbikudG9GaXhlZCgpICsgXCIlKVwiO1xuXG5leHBvcnQgZnVuY3Rpb24gZnVuY3RvcihkKSB7XG4gICAgcmV0dXJuIGlzRnVuY3Rpb24oZCkgPyBkIDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBkO1xuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlsLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/util.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/wordcloud.js":
/*!***************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/wordcloud.js ***!
  \***************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   transform: () => (/* binding */ transform)\n/* harmony export */ });\n/* harmony import */ var _cloud_layout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./cloud-layout */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/cloud-layout.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.19.7/node_modules/@visactor/vutils/es/logger.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.19.7/node_modules/@visactor/vutils/es/common/isNumber.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.19.7/node_modules/@visactor/vutils/es/common/isString.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.19.7/node_modules/@visactor/vutils/es/common/isFunction.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.19.7/node_modules/@visactor/vutils/es/common/isArray.js\");\n/* harmony import */ var _visactor_vutils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @visactor/vutils */ \"(ssr)/./node_modules/.pnpm/@visactor+vutils@0.19.7/node_modules/@visactor/vutils/es/common/toNumber.js\");\n/* harmony import */ var _grid_layout__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./grid-layout */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/grid-layout.js\");\n/* harmony import */ var _fast_layout__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./fast-layout */ \"(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/fast-layout.js\");\n\n\n\n\n\n\n\n\nconst OUTPUT = {\n    x: \"x\",\n    y: \"y\",\n    z: \"z\",\n    fontFamily: \"fontFamily\",\n    fontSize: \"fontSize\",\n    fontStyle: \"fontStyle\",\n    fontWeight: \"fontWeight\",\n    angle: \"angle\"\n};\n\nconst transform = (options, upstreamData) => {\n    var _a, _b, _c, _d, _e, _f;\n    if (options.size && (options.size[0] <= 0 || options.size[1] <= 0)) {\n        return _visactor_vutils__WEBPACK_IMPORTED_MODULE_0__.Logger.getInstance().info(\"Wordcloud size dimensions must be greater than 0\"), \n        [];\n    }\n    const data = upstreamData, canvasSize = (null !== (_a = options.size) && void 0 !== _a ? _a : [ 500, 500 ]).slice();\n    canvasSize[0] = Math.floor(canvasSize[0]), canvasSize[1] = Math.floor(canvasSize[1]);\n    const fontFamily = options.fontFamily ? field(options.fontFamily) : \"sans-serif\", fontStyle = options.fontStyle ? field(options.fontStyle) : \"normal\", fontWeight = options.fontWeight ? field(options.fontWeight) : \"normal\", rotate = options.rotate ? field(options.rotate) : 0, text = field(options.text), spiral = null !== (_b = options.spiral) && void 0 !== _b ? _b : \"archimedean\", padding = options.padding ? field(options.padding) : 1, shape = null !== (_c = options.shape) && void 0 !== _c ? _c : \"square\", shrink = null !== (_d = options.shrink) && void 0 !== _d && _d, enlarge = null !== (_e = options.enlarge) && void 0 !== _e && _e, clip = null !== (_f = options.clip) && void 0 !== _f && _f, minFontSize = options.minFontSize, randomVisible = options.randomVisible, as = options.as ? Object.assign(Object.assign({}, OUTPUT), options.as) : OUTPUT, depth_3d = options.depth_3d, postProjection = options.postProjection;\n    let fontSize = options.fontSize ? field(options.fontSize) : 14;\n    const fontSizeRange = options.fontSizeRange;\n    if (fontSizeRange && !(0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(fontSize)) {\n        const fsize = fontSize, fontSizeSqrtScale = generateScale(extent(fsize, data), fontSizeRange);\n        fontSize = datum => fontSizeSqrtScale(fsize(datum));\n    }\n    let Layout = _cloud_layout__WEBPACK_IMPORTED_MODULE_2__.CloudLayout;\n    \"fast\" === options.layoutType ? Layout = _fast_layout__WEBPACK_IMPORTED_MODULE_3__.FastLayout : \"grid\" === options.layoutType && (Layout = _grid_layout__WEBPACK_IMPORTED_MODULE_4__.GridLayout);\n    const layout = new Layout(Object.assign(Object.assign({}, options), {\n        text: text,\n        padding: padding,\n        spiral: spiral,\n        shape: shape,\n        rotate: rotate,\n        fontFamily: fontFamily,\n        fontStyle: fontStyle,\n        fontWeight: fontWeight,\n        fontSize: fontSize,\n        shrink: shrink,\n        clip: clip,\n        enlarge: enlarge,\n        minFontSize: minFontSize,\n        random: randomVisible,\n        outputCallback: words => {\n            const res = [];\n            let t, w;\n            for (let i = 0, len = words.length; i < len; i++) w = words[i], t = w.datum, t[as.x] = w.x, \n            t[as.y] = w.y, t[as.fontFamily] = w.fontFamily, t[as.fontSize] = w.fontSize, t[as.fontStyle] = w.fontStyle, \n            t[as.fontWeight] = w.fontWeight, t[as.angle] = w.angle, \"StereographicProjection\" === postProjection && stereographicProjection(canvasSize, w, t, as, depth_3d), \n            options.dataIndexKey && (t[options.dataIndexKey] = `${i}`), res.push(t);\n            return res;\n        }\n    }));\n    return layout.layout(data, {\n        width: canvasSize[0],\n        height: canvasSize[1]\n    }), options.progressiveStep > 0 || options.progressiveTime > 0 ? {\n        progressive: layout\n    } : layout.output();\n};\n\nconst field = option => (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(option) || (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(option) || (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(option) || (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(option) ? option : datum => datum[option.field], sqrt = x => x < 0 ? -Math.sqrt(-x) : Math.sqrt(x), generateScale = (domain, range, type) => {\n    if (domain[0] === domain[1]) return datum => range[0];\n    const s0 = sqrt(domain[0]), s1 = sqrt(domain[1]), min = Math.min(s0, s1), max = Math.max(s0, s1);\n    return datum => (sqrt(datum) - min) / (max - min) * (range[1] - range[0]) + range[0];\n}, extent = (field, data) => {\n    let min = 1 / 0, max = -1 / 0;\n    const n = data.length;\n    let v;\n    for (let i = 0; i < n; ++i) v = (0,_visactor_vutils__WEBPACK_IMPORTED_MODULE_8__.toNumber)(field(data[i])), v < min && (min = v), \n    v > max && (max = v);\n    return 1 === data.length && min === max && (min -= 1e4), [ min, max ];\n};\n\nfunction stereographicProjection(canvasSize, w, t, as, depth_3d) {\n    const r = Math.max(canvasSize[0], canvasSize[1]) / 2, out = _StereographicProjection(canvasSize[0], canvasSize[1], r, {\n        x: r,\n        y: r,\n        z: null != depth_3d ? depth_3d : r\n    }, w);\n    t[as.x] = out.x, t[as.y] = out.y, t[as.z] = out.z;\n}\n\nfunction _StereographicProjection(w, h, r, center, word) {\n    const {x: x, y: y} = word, theta = x / w * Math.PI * 2;\n    let phi = Math.PI - y / h * Math.PI;\n    phi += (phi < Math.PI / 2 ? 1 : -1) * Math.pow(Math.min(phi - Math.PI / 2, 1), 2) / 5;\n    return {\n        x: r * Math.sin(phi) * Math.cos(theta) + center.x,\n        y: r * Math.cos(phi) + center.y,\n        z: r * Math.sin(phi) * Math.sin(theta) + center.z\n    };\n}\n//# sourceMappingURL=wordcloud.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHZpc2FjdG9yK3ZncmFtbWFyLXdvcmRjbG91ZEAwLjE2LjExL25vZGVfbW9kdWxlcy9AdmlzYWN0b3IvdmdyYW1tYXItd29yZGNsb3VkL2VzL3dvcmRjbG91ZC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQTZDOztBQUVnRDs7QUFFbEQ7O0FBRUE7O0FBRTNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBLGVBQWUsb0RBQU07QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyekJBQTJ6QjtBQUMzekI7QUFDQTtBQUNBLDBCQUEwQiw0REFBUTtBQUNsQztBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsc0RBQVc7QUFDNUIsNkNBQTZDLG9EQUFVLDhDQUE4QyxvREFBVTtBQUMvRyw0REFBNEQ7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxTQUFTO0FBQ3pEO0FBQ0E7QUFDQSxrRUFBa0UsRUFBRTtBQUNwRTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLE1BQU07QUFDTjs7QUFFQSx3QkFBd0IsNERBQVEsWUFBWSw0REFBUSxZQUFZLDREQUFVLFlBQVksNERBQU87QUFDN0Y7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixPQUFPLFNBQVMsMERBQVE7QUFDNUM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBLFdBQVcsWUFBWTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXNhY3Rvci1uZXh0LXRlbXBsYXRlLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0B2aXNhY3Rvcit2Z3JhbW1hci13b3JkY2xvdWRAMC4xNi4xMS9ub2RlX21vZHVsZXMvQHZpc2FjdG9yL3ZncmFtbWFyLXdvcmRjbG91ZC9lcy93b3JkY2xvdWQuanM/ZGZkNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDbG91ZExheW91dCB9IGZyb20gXCIuL2Nsb3VkLWxheW91dFwiO1xuXG5pbXBvcnQgeyBpc0Z1bmN0aW9uLCBpc051bWJlciwgaXNTdHJpbmcsIHRvTnVtYmVyLCBMb2dnZXIsIGlzQXJyYXkgfSBmcm9tIFwiQHZpc2FjdG9yL3Z1dGlsc1wiO1xuXG5pbXBvcnQgeyBHcmlkTGF5b3V0IH0gZnJvbSBcIi4vZ3JpZC1sYXlvdXRcIjtcblxuaW1wb3J0IHsgRmFzdExheW91dCB9IGZyb20gXCIuL2Zhc3QtbGF5b3V0XCI7XG5cbmNvbnN0IE9VVFBVVCA9IHtcbiAgICB4OiBcInhcIixcbiAgICB5OiBcInlcIixcbiAgICB6OiBcInpcIixcbiAgICBmb250RmFtaWx5OiBcImZvbnRGYW1pbHlcIixcbiAgICBmb250U2l6ZTogXCJmb250U2l6ZVwiLFxuICAgIGZvbnRTdHlsZTogXCJmb250U3R5bGVcIixcbiAgICBmb250V2VpZ2h0OiBcImZvbnRXZWlnaHRcIixcbiAgICBhbmdsZTogXCJhbmdsZVwiXG59O1xuXG5leHBvcnQgY29uc3QgdHJhbnNmb3JtID0gKG9wdGlvbnMsIHVwc3RyZWFtRGF0YSkgPT4ge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mO1xuICAgIGlmIChvcHRpb25zLnNpemUgJiYgKG9wdGlvbnMuc2l6ZVswXSA8PSAwIHx8IG9wdGlvbnMuc2l6ZVsxXSA8PSAwKSkge1xuICAgICAgICByZXR1cm4gTG9nZ2VyLmdldEluc3RhbmNlKCkuaW5mbyhcIldvcmRjbG91ZCBzaXplIGRpbWVuc2lvbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMFwiKSwgXG4gICAgICAgIFtdO1xuICAgIH1cbiAgICBjb25zdCBkYXRhID0gdXBzdHJlYW1EYXRhLCBjYW52YXNTaXplID0gKG51bGwgIT09IChfYSA9IG9wdGlvbnMuc2l6ZSkgJiYgdm9pZCAwICE9PSBfYSA/IF9hIDogWyA1MDAsIDUwMCBdKS5zbGljZSgpO1xuICAgIGNhbnZhc1NpemVbMF0gPSBNYXRoLmZsb29yKGNhbnZhc1NpemVbMF0pLCBjYW52YXNTaXplWzFdID0gTWF0aC5mbG9vcihjYW52YXNTaXplWzFdKTtcbiAgICBjb25zdCBmb250RmFtaWx5ID0gb3B0aW9ucy5mb250RmFtaWx5ID8gZmllbGQob3B0aW9ucy5mb250RmFtaWx5KSA6IFwic2Fucy1zZXJpZlwiLCBmb250U3R5bGUgPSBvcHRpb25zLmZvbnRTdHlsZSA/IGZpZWxkKG9wdGlvbnMuZm9udFN0eWxlKSA6IFwibm9ybWFsXCIsIGZvbnRXZWlnaHQgPSBvcHRpb25zLmZvbnRXZWlnaHQgPyBmaWVsZChvcHRpb25zLmZvbnRXZWlnaHQpIDogXCJub3JtYWxcIiwgcm90YXRlID0gb3B0aW9ucy5yb3RhdGUgPyBmaWVsZChvcHRpb25zLnJvdGF0ZSkgOiAwLCB0ZXh0ID0gZmllbGQob3B0aW9ucy50ZXh0KSwgc3BpcmFsID0gbnVsbCAhPT0gKF9iID0gb3B0aW9ucy5zcGlyYWwpICYmIHZvaWQgMCAhPT0gX2IgPyBfYiA6IFwiYXJjaGltZWRlYW5cIiwgcGFkZGluZyA9IG9wdGlvbnMucGFkZGluZyA/IGZpZWxkKG9wdGlvbnMucGFkZGluZykgOiAxLCBzaGFwZSA9IG51bGwgIT09IChfYyA9IG9wdGlvbnMuc2hhcGUpICYmIHZvaWQgMCAhPT0gX2MgPyBfYyA6IFwic3F1YXJlXCIsIHNocmluayA9IG51bGwgIT09IChfZCA9IG9wdGlvbnMuc2hyaW5rKSAmJiB2b2lkIDAgIT09IF9kICYmIF9kLCBlbmxhcmdlID0gbnVsbCAhPT0gKF9lID0gb3B0aW9ucy5lbmxhcmdlKSAmJiB2b2lkIDAgIT09IF9lICYmIF9lLCBjbGlwID0gbnVsbCAhPT0gKF9mID0gb3B0aW9ucy5jbGlwKSAmJiB2b2lkIDAgIT09IF9mICYmIF9mLCBtaW5Gb250U2l6ZSA9IG9wdGlvbnMubWluRm9udFNpemUsIHJhbmRvbVZpc2libGUgPSBvcHRpb25zLnJhbmRvbVZpc2libGUsIGFzID0gb3B0aW9ucy5hcyA/IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgT1VUUFVUKSwgb3B0aW9ucy5hcykgOiBPVVRQVVQsIGRlcHRoXzNkID0gb3B0aW9ucy5kZXB0aF8zZCwgcG9zdFByb2plY3Rpb24gPSBvcHRpb25zLnBvc3RQcm9qZWN0aW9uO1xuICAgIGxldCBmb250U2l6ZSA9IG9wdGlvbnMuZm9udFNpemUgPyBmaWVsZChvcHRpb25zLmZvbnRTaXplKSA6IDE0O1xuICAgIGNvbnN0IGZvbnRTaXplUmFuZ2UgPSBvcHRpb25zLmZvbnRTaXplUmFuZ2U7XG4gICAgaWYgKGZvbnRTaXplUmFuZ2UgJiYgIWlzTnVtYmVyKGZvbnRTaXplKSkge1xuICAgICAgICBjb25zdCBmc2l6ZSA9IGZvbnRTaXplLCBmb250U2l6ZVNxcnRTY2FsZSA9IGdlbmVyYXRlU2NhbGUoZXh0ZW50KGZzaXplLCBkYXRhKSwgZm9udFNpemVSYW5nZSk7XG4gICAgICAgIGZvbnRTaXplID0gZGF0dW0gPT4gZm9udFNpemVTcXJ0U2NhbGUoZnNpemUoZGF0dW0pKTtcbiAgICB9XG4gICAgbGV0IExheW91dCA9IENsb3VkTGF5b3V0O1xuICAgIFwiZmFzdFwiID09PSBvcHRpb25zLmxheW91dFR5cGUgPyBMYXlvdXQgPSBGYXN0TGF5b3V0IDogXCJncmlkXCIgPT09IG9wdGlvbnMubGF5b3V0VHlwZSAmJiAoTGF5b3V0ID0gR3JpZExheW91dCk7XG4gICAgY29uc3QgbGF5b3V0ID0gbmV3IExheW91dChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpLCB7XG4gICAgICAgIHRleHQ6IHRleHQsXG4gICAgICAgIHBhZGRpbmc6IHBhZGRpbmcsXG4gICAgICAgIHNwaXJhbDogc3BpcmFsLFxuICAgICAgICBzaGFwZTogc2hhcGUsXG4gICAgICAgIHJvdGF0ZTogcm90YXRlLFxuICAgICAgICBmb250RmFtaWx5OiBmb250RmFtaWx5LFxuICAgICAgICBmb250U3R5bGU6IGZvbnRTdHlsZSxcbiAgICAgICAgZm9udFdlaWdodDogZm9udFdlaWdodCxcbiAgICAgICAgZm9udFNpemU6IGZvbnRTaXplLFxuICAgICAgICBzaHJpbms6IHNocmluayxcbiAgICAgICAgY2xpcDogY2xpcCxcbiAgICAgICAgZW5sYXJnZTogZW5sYXJnZSxcbiAgICAgICAgbWluRm9udFNpemU6IG1pbkZvbnRTaXplLFxuICAgICAgICByYW5kb206IHJhbmRvbVZpc2libGUsXG4gICAgICAgIG91dHB1dENhbGxiYWNrOiB3b3JkcyA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBbXTtcbiAgICAgICAgICAgIGxldCB0LCB3O1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHdvcmRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB3ID0gd29yZHNbaV0sIHQgPSB3LmRhdHVtLCB0W2FzLnhdID0gdy54LCBcbiAgICAgICAgICAgIHRbYXMueV0gPSB3LnksIHRbYXMuZm9udEZhbWlseV0gPSB3LmZvbnRGYW1pbHksIHRbYXMuZm9udFNpemVdID0gdy5mb250U2l6ZSwgdFthcy5mb250U3R5bGVdID0gdy5mb250U3R5bGUsIFxuICAgICAgICAgICAgdFthcy5mb250V2VpZ2h0XSA9IHcuZm9udFdlaWdodCwgdFthcy5hbmdsZV0gPSB3LmFuZ2xlLCBcIlN0ZXJlb2dyYXBoaWNQcm9qZWN0aW9uXCIgPT09IHBvc3RQcm9qZWN0aW9uICYmIHN0ZXJlb2dyYXBoaWNQcm9qZWN0aW9uKGNhbnZhc1NpemUsIHcsIHQsIGFzLCBkZXB0aF8zZCksIFxuICAgICAgICAgICAgb3B0aW9ucy5kYXRhSW5kZXhLZXkgJiYgKHRbb3B0aW9ucy5kYXRhSW5kZXhLZXldID0gYCR7aX1gKSwgcmVzLnB1c2godCk7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9XG4gICAgfSkpO1xuICAgIHJldHVybiBsYXlvdXQubGF5b3V0KGRhdGEsIHtcbiAgICAgICAgd2lkdGg6IGNhbnZhc1NpemVbMF0sXG4gICAgICAgIGhlaWdodDogY2FudmFzU2l6ZVsxXVxuICAgIH0pLCBvcHRpb25zLnByb2dyZXNzaXZlU3RlcCA+IDAgfHwgb3B0aW9ucy5wcm9ncmVzc2l2ZVRpbWUgPiAwID8ge1xuICAgICAgICBwcm9ncmVzc2l2ZTogbGF5b3V0XG4gICAgfSA6IGxheW91dC5vdXRwdXQoKTtcbn07XG5cbmNvbnN0IGZpZWxkID0gb3B0aW9uID0+IGlzU3RyaW5nKG9wdGlvbikgfHwgaXNOdW1iZXIob3B0aW9uKSB8fCBpc0Z1bmN0aW9uKG9wdGlvbikgfHwgaXNBcnJheShvcHRpb24pID8gb3B0aW9uIDogZGF0dW0gPT4gZGF0dW1bb3B0aW9uLmZpZWxkXSwgc3FydCA9IHggPT4geCA8IDAgPyAtTWF0aC5zcXJ0KC14KSA6IE1hdGguc3FydCh4KSwgZ2VuZXJhdGVTY2FsZSA9IChkb21haW4sIHJhbmdlLCB0eXBlKSA9PiB7XG4gICAgaWYgKGRvbWFpblswXSA9PT0gZG9tYWluWzFdKSByZXR1cm4gZGF0dW0gPT4gcmFuZ2VbMF07XG4gICAgY29uc3QgczAgPSBzcXJ0KGRvbWFpblswXSksIHMxID0gc3FydChkb21haW5bMV0pLCBtaW4gPSBNYXRoLm1pbihzMCwgczEpLCBtYXggPSBNYXRoLm1heChzMCwgczEpO1xuICAgIHJldHVybiBkYXR1bSA9PiAoc3FydChkYXR1bSkgLSBtaW4pIC8gKG1heCAtIG1pbikgKiAocmFuZ2VbMV0gLSByYW5nZVswXSkgKyByYW5nZVswXTtcbn0sIGV4dGVudCA9IChmaWVsZCwgZGF0YSkgPT4ge1xuICAgIGxldCBtaW4gPSAxIC8gMCwgbWF4ID0gLTEgLyAwO1xuICAgIGNvbnN0IG4gPSBkYXRhLmxlbmd0aDtcbiAgICBsZXQgdjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG47ICsraSkgdiA9IHRvTnVtYmVyKGZpZWxkKGRhdGFbaV0pKSwgdiA8IG1pbiAmJiAobWluID0gdiksIFxuICAgIHYgPiBtYXggJiYgKG1heCA9IHYpO1xuICAgIHJldHVybiAxID09PSBkYXRhLmxlbmd0aCAmJiBtaW4gPT09IG1heCAmJiAobWluIC09IDFlNCksIFsgbWluLCBtYXggXTtcbn07XG5cbmZ1bmN0aW9uIHN0ZXJlb2dyYXBoaWNQcm9qZWN0aW9uKGNhbnZhc1NpemUsIHcsIHQsIGFzLCBkZXB0aF8zZCkge1xuICAgIGNvbnN0IHIgPSBNYXRoLm1heChjYW52YXNTaXplWzBdLCBjYW52YXNTaXplWzFdKSAvIDIsIG91dCA9IF9TdGVyZW9ncmFwaGljUHJvamVjdGlvbihjYW52YXNTaXplWzBdLCBjYW52YXNTaXplWzFdLCByLCB7XG4gICAgICAgIHg6IHIsXG4gICAgICAgIHk6IHIsXG4gICAgICAgIHo6IG51bGwgIT0gZGVwdGhfM2QgPyBkZXB0aF8zZCA6IHJcbiAgICB9LCB3KTtcbiAgICB0W2FzLnhdID0gb3V0LngsIHRbYXMueV0gPSBvdXQueSwgdFthcy56XSA9IG91dC56O1xufVxuXG5mdW5jdGlvbiBfU3RlcmVvZ3JhcGhpY1Byb2plY3Rpb24odywgaCwgciwgY2VudGVyLCB3b3JkKSB7XG4gICAgY29uc3Qge3g6IHgsIHk6IHl9ID0gd29yZCwgdGhldGEgPSB4IC8gdyAqIE1hdGguUEkgKiAyO1xuICAgIGxldCBwaGkgPSBNYXRoLlBJIC0geSAvIGggKiBNYXRoLlBJO1xuICAgIHBoaSArPSAocGhpIDwgTWF0aC5QSSAvIDIgPyAxIDogLTEpICogTWF0aC5wb3coTWF0aC5taW4ocGhpIC0gTWF0aC5QSSAvIDIsIDEpLCAyKSAvIDU7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgeDogciAqIE1hdGguc2luKHBoaSkgKiBNYXRoLmNvcyh0aGV0YSkgKyBjZW50ZXIueCxcbiAgICAgICAgeTogciAqIE1hdGguY29zKHBoaSkgKyBjZW50ZXIueSxcbiAgICAgICAgejogciAqIE1hdGguc2luKHBoaSkgKiBNYXRoLnNpbih0aGV0YSkgKyBjZW50ZXIuelxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD13b3JkY2xvdWQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@visactor+vgrammar-wordcloud@0.16.11/node_modules/@visactor/vgrammar-wordcloud/es/wordcloud.js\n");

/***/ })

};
;